{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external {\"root\":\"Blockly\",\"commonjs\":\"blockly/core\",\"commonjs2\":\"blockly/core\",\"amd\":\"blockly/core\"}","webpack:///./src/field_minus.js","webpack:///./src/field_plus.js","webpack:///./src/if.js","webpack:///./src/list_create.js","webpack:///./src/procedures.js","webpack:///./src/text_join.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","createMinusField","opt_args","minus","minusImage","undefined","onClick_","args_","minusField","block","getSourceBlock","isInFlyout","setGroup","oldMutationDom","mutationToDom","oldMutation","domToText","newMutationDom","newMutation","fire","BlockChange","createPlusField","plus","plusImage","plusField","controlsIfMutator","suppressPrefixSuffix","elseIfCount_","hasElse_","container","utils","xml","createElement","setAttribute","domToMutation","xmlElement","targetCount","parseInt","getAttribute","getInput","appendStatementInput","appendField","Msg","updateShape_","addElseIf_","removeElseIf_","index","appendValueInput","setCheck","moveInputBefore","opt_index","elseIfIndex","inputs","inputList","connection","isConnected","disconnect","bumpNeighbours","input","targetConnection","connect","removeInput","Extensions","unregister","registerMutator","insertFieldAt","defineBlocksWithJsonArray","listCreateMutator","itemCount_","addPart_","removePart_","updateMinus_","topInput_","appendDummyInput","getField","removeField","registerMixin","getProcedureDef","argNames","argData_","map","elem","model","getFieldValue","callType_","procedureContextMenu","customContextMenu","options","text","replace","appendChild","callback","ContextMenu","callbackFactory","push","enabled","isCollapsed","varModels","getVarModels","Variables","generateVariableFieldDom","procedureDefMutator","isForCaller","forEach","element","argument","argModel","getId","argId","hasStatements_","names","ids","childNode","childNodes","nodeName","toLowerCase","varIds","length","Error","removeArg_","addArg_","Procedures","mutateCallers","varId","withField","FieldLabel","generateUniqueNameFromOptions","DEFAULT_ARG","variable","getOrCreateVariablePackage","workspace","genUid","addVarInput_","filter","nameField","FieldTextInput","validator_","onFinishEditing_","finishEditing_","varIdsToDelete_","preEditVarModel_","setAlign","ALIGN_RIGHT","newName","sourceBlock","argData","argDatum","find","currId","caselessName","trim","every","getVariableUsesById","id","getProcedureCall","getVariable","renameVariableById","createVariable","_finalName","source","currentVarId","deleteVariableById","register","setValidator","rename","mixin","getVars","renameVarById","oldId","newId","newVar","getVariableById","updateVarName","setFieldValue","textJoinMutator","newQuote_","Constants","Text","QUOTE_IMAGE_MIXIN"],"mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,sBAC7B,GAAqB,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,gBAAiBJ,OACrB,CACJ,IAAIM,EAAuB,iBAAZL,QAAuBD,EAAQG,QAAQ,iBAAmBH,EAAQD,EAAc,SAC/F,IAAI,IAAIQ,KAAKD,GAAuB,iBAAZL,QAAuBA,QAAUF,GAAMQ,GAAKD,EAAEC,IAPxE,CASGC,MAAM,SAASC,GAClB,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUX,QAGnC,IAAIC,EAASQ,EAAiBE,GAAY,CACzCL,EAAGK,EACHC,GAAG,EACHZ,QAAS,IAUV,OANAa,EAAQF,GAAUG,KAAKb,EAAOD,QAASC,EAAQA,EAAOD,QAASU,GAG/DT,EAAOW,GAAI,EAGJX,EAAOD,QA0Df,OArDAU,EAAoBK,EAAIF,EAGxBH,EAAoBM,EAAIP,EAGxBC,EAAoBO,EAAI,SAASjB,EAASkB,EAAMC,GAC3CT,EAAoBU,EAAEpB,EAASkB,IAClCG,OAAOC,eAAetB,EAASkB,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhET,EAAoBe,EAAI,SAASzB,GACX,oBAAX0B,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAetB,EAAS0B,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBO,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAASnC,GAChC,IAAIkB,EAASlB,GAAUA,EAAO8B,WAC7B,WAAwB,OAAO9B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAS,EAAoBO,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRT,EAAoBU,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG5B,EAAoB+B,EAAI,SAIjB/B,EAAoBA,EAAoBgC,EAAI,G,gBClFrDzC,EAAOD,QAAUQ,G;;;;;;ACmBV,SAASmC,EAAiBC,GAC/B,MAAMC,EAAQ,IAAI,aAAmBC,EAAY,GAAI,QAAIC,EAAWC,GAOpE,OADAH,EAAMI,MAAQL,EACPC,EAQT,SAASG,EAASE,GAEhB,MAAMC,EAAQD,EAAWE,iBAEzB,GAAID,EAAME,WACR,OAGF,SAAeC,UAAS,GAExB,MAAMC,EAAiBJ,EAAMK,gBACvBC,EAAcF,GAAkB,MAAYG,UAAUH,GAE5DJ,EAAMN,MAAMK,EAAWD,OAEvB,MAAMU,EAAiBR,EAAMK,gBACvBI,EAAcD,GAAkB,MAAYD,UAAUC,GAExDF,GAAeG,GACjB,SAAeC,KAAK,IAAI,SAAeC,YACnCX,EAAO,WAAY,KAAMM,EAAaG,IAE5C,SAAeN,UAAS,GAG1B,MAAMR,EACF;;;;;GC1CG,SAASiB,EAAgBnB,GAC9B,MAAMoB,EAAO,IAAI,aAAmBC,EAAW,GAAI,QAAIlB,EAAW,GAOlE,OADAiB,EAAKf,MAAQL,EACNoB,EAQT,SAAS,EAASE,GAEhB,MAAMf,EAAQe,EAAUd,iBAExB,GAAID,EAAME,WACR,OAGF,SAAeC,UAAS,GAExB,MAAMC,EAAiBJ,EAAMK,gBACvBC,EAAcF,GAAkB,MAAYG,UAAUH,GAE5DJ,EAAMa,KAAKE,EAAUjB,OAErB,MAAMU,EAAiBR,EAAMK,gBACvBI,EAAcD,GAAkB,MAAYD,UAAUC,GAExDF,GAAeG,GACjB,SAAeC,KAAK,IAAI,SAAeC,YACnCX,EAAO,WAAY,KAAMM,EAAaG,IAE5C,SAAeN,UAAS,GAG1B,MAAMW,EACF,yaC/CEE,EAAoB,CAExBC,sBAAsB,EAMtBC,aAAc,EAKdC,UAAU,EAOVd,cAAe,WACb,IAAKjD,KAAK8D,eAAiB9D,KAAK+D,SAC9B,OAAO,KAET,MAAMC,EAAY,IAAQC,MAAMC,IAAIC,cAAc,YAMlD,OALAH,EAAUI,aAAa,SAAUpE,KAAK8D,cAClC9D,KAAK+D,UAEPC,EAAUI,aAAa,OAAQ,GAE1BJ,GAQTK,cAAe,SAASC,GACtB,MAAMC,EAAcC,SAASF,EAAWG,aAAa,UAAW,KAAO,EACvEzE,KAAK+D,WAAaS,SAASF,EAAWG,aAAa,QAAS,KAAO,EAC/DzE,KAAK+D,WAAa/D,KAAK0E,SAAS,SAClC1E,KAAK2E,qBAAqB,QACrBC,YAAY,IAAQC,IAA0B,sBAErD7E,KAAK8E,aAAaP,IAUpBO,aAAc,SAASP,GACrB,KAAOvE,KAAK8D,aAAeS,GACzBvE,KAAK+E,aAEP,KAAO/E,KAAK8D,aAAeS,GACzBvE,KAAKgF,iBAOTvB,KAAM,WACJzD,KAAK+E,cAUPzC,MAAO,SAAS2C,GACW,GAArBjF,KAAK8D,cAGT9D,KAAKgF,cAAcC,IAQrBF,WAAY,WAEV/E,KAAK8D,eACL9D,KAAKkF,iBAAiB,KAAOlF,KAAK8D,cAC7BqB,SAAS,WACTP,YAAY,IAAQC,IAA4B,wBAChDD,YACGxC,EAAiBpC,KAAK8D,cAAe,QAAU9D,KAAK8D,cAC5D9D,KAAK2E,qBAAqB,KAAO3E,KAAK8D,cACjCc,YAAY,IAAQC,IAA0B,sBAG/C7E,KAAK0E,SAAS,SAChB1E,KAAKoF,gBAAgB,OAAyB,OAalDJ,cAAe,SAASK,GAOtB,QAAkB7C,IAAd6C,GAA2BA,GAAYrF,KAAK8D,aAAc,CAG5D,MAAMwB,EAA0B,EAAZD,EACdE,EAASvF,KAAKwF,UACpB,IAAIC,EAAaF,EAAOD,GAAaG,WACjCA,EAAWC,eACbD,EAAWE,aAEbF,EAAaF,EAAOD,EAAc,GAAGG,WACjCA,EAAWC,eACbD,EAAWE,aAEb3F,KAAK4F,iBACL,IAAK,IAAyBC,EAArB9F,EAAIuF,EAAc,GAAWO,EAAQ7F,KAAKwF,UAAUzF,KACzC,QAAd8F,EAAMlF,KADsDZ,IAAK,CAIrE,MAAM+F,EAAmBD,EAAMJ,WAAWK,iBACtCA,GACF9F,KAAKwF,UAAUzF,EAAI,GAAG0F,WAAWM,QAAQD,IAK/C9F,KAAKgG,YAAY,KAAOhG,KAAK8D,cAC7B9D,KAAKgG,YAAY,KAAOhG,KAAK8D,cAE7B9D,KAAK8D;;;;;GAYT,IAAQmC,WAAWC,WAAW,uBAC9B,IAAQD,WAAWE,gBAAgB,sBAC/BvC,GANqB,WACvB5D,KAAK0E,SAAS,OAAO0B,cAAc,EAAG5C,IAAmB;;;;;;AC/J3D,IAAQ6C,0BAA0B,CAChC,CACE,KAAQ,oBACR,SAAY,qCACZ,MAAS,CACP,CACE,KAAQ,cACR,KAAQ,UAGZ,OAAU,QACV,MAAS,cACT,QAAW,mCACX,QAAW,mCACX,QAAW,kCAKf,MAAMC,EAAoB,CAKxBC,WAAY,EAOZtD,cAAe,WACb,MAAMe,EAAY,IAAQC,MAAMC,IAAIC,cAAc,YAElD,OADAH,EAAUI,aAAa,QAASpE,KAAKuG,YAC9BvC,GAOTK,cAAe,SAASC,GACtB,MAAMC,EAAcC,SAASF,EAAWG,aAAa,SAAU,IAC/DzE,KAAK8E,aAAaP,IASpBO,aAAc,SAASP,GACrB,KAAOvE,KAAKuG,WAAahC,GACvBvE,KAAKwG,WAEP,KAAOxG,KAAKuG,WAAahC,GACvBvE,KAAKyG,cAEPzG,KAAK0G,gBAOPjD,KAAM,WACJzD,KAAKwG,WACLxG,KAAK0G,gBAOPpE,MAAO,WACkB,GAAnBtC,KAAKuG,aAGTvG,KAAKyG,cACLzG,KAAK0G,iBAaPF,SAAU,WACe,GAAnBxG,KAAKuG,YACPvG,KAAKgG,YAAY,SACjBhG,KAAK2G,UAAY3G,KAAKkF,iBAAiB,MAAQlF,KAAKuG,YAC/C3B,YAAYpB,IAAmB,QAC/BoB,YAAY,IAAQC,IAAkC,+BAE3D7E,KAAKkF,iBAAiB,MAAQlF,KAAKuG,YAErCvG,KAAKuG,cASPE,YAAa,WACXzG,KAAKuG,aACLvG,KAAKgG,YAAY,MAAQhG,KAAKuG,YACP,GAAnBvG,KAAKuG,aACPvG,KAAK2G,UAAY3G,KAAK4G,iBAAiB,SAClChC,YAAYpB,IAAmB,QAC/BoB,YAAY,IAAQC,IAA8B,4BAQ3D6B,aAAc,WACZ,MAAM/D,EAAa3C,KAAK6G,SAAS,UAC5BlE,GAAc3C,KAAKuG,WAAa,EACnCvG,KAAK2G,UAAUP,cAAc,EAAGhE,IAAoB,SAC3CO,GAAc3C,KAAKuG,WAAa,GACzCvG,KAAK2G,UAAUG,YAAY,WAcjC,IAAQb,WAAWE,gBAAgB,+BAC/BG,GANqB,WACvBtG,KAAK0E,SAAS,SAAS0B,cAAc,EAAG5C,IAAmB,QAC3DxD,KAAK8E,aAAa;;;;;;AC9IpB,IAAQD,IAAwB,mBAAI,YAGpC,IAAQwB,0BAA0B,CAChC,CACE,KAAQ,yBACR,SAAY,4CACZ,SAAY,sCACZ,MAAS,CACP,CACE,KAAQ,cACR,KAAQ,OACR,KAAQ,IAEV,CACE,KAAQ,cACR,KAAQ,QAGZ,MAAS,CACP,CACE,KAAQ,kBACR,KAAQ,UAGZ,MAAS,mBACT,QAAW,wCACX,QAAW,wCACX,WAAc,CACZ,8BACA,yBACA,mBACA,kBAEF,QAAW,yBAEb,CACE,KAAQ,uBACR,SAAY,0CACZ,SAAY,oCACZ,SAAY,wCACZ,MAAS,CACP,CACE,KAAQ,cACR,KAAQ,OACR,KAAQ,IAEV,CACE,KAAQ,cACR,KAAQ,QAGZ,MAAS,CACP,CACE,KAAQ,kBACR,KAAQ,UAGZ,MAAS,CACP,CACE,KAAQ,cACR,MAAS,QACT,KAAQ,WAGZ,MAAS,mBACT,QAAW,sCACX,QAAW,sCACX,WAAc,CACZ,2BACA,yBACA,mBACA,kBAEF,QAAW,2BA4Bf,IAAQJ,WAAWc,cAAc,8BAlBV,CAMrBC,gBAAiB,WACf,MAAMC,EAAWjH,KAAKkH,SAASC,IAAKC,GAASA,EAAKC,MAAM1G,MACxD,MAAO,CAACX,KAAKsH,cAAc,QAASL,GAAU,IAOhDM,UAAW,4BA2Bb,IAAQtB,WAAWc,cAAc,2BAjBZ,CAMnBC,gBAAiB,WACf,MAAMC,EAAWjH,KAAKkH,SAASC,IAAKC,GAASA,EAAKC,MAAM1G,MACxD,MAAO,CAACX,KAAKsH,cAAc,QAASL,GAAU,IAMhDM,UAAW,0BAKb,MAAMC,EAAuB,CAQ3BC,kBAAmB,SAASC,GAC1B,GAAI1H,KAAK8C,WACP,OAIF,MAAMnC,EAAOX,KAAKsH,cAAc,QAC1BK,EAAO,IAAQ9C,IAA0B,qBAAE+C,QAAQ,KAAMjH,GAEzDuD,EAAM,IAAQD,MAAMC,IAAIC,cAAc,SAC5CD,EAAIE,aAAa,OAAQpE,KAAKuH,WAC9BrD,EAAI2D,YAAY7H,KAAKiD,eAAc,IACnC,MAAM6E,EAAW,IAAQC,YAAYC,gBAAgBhI,KAAMkE,GAQ3D,GANAwD,EAAQO,KAAK,CACXC,SAAS,EACTP,KAAMA,EACNG,SAAUA,IAGR9H,KAAKmI,cACP,OAIF,MAAMC,EAAYpI,KAAKqI,eACvB,IAAK,MAAMhB,KAASe,EAAW,CAC7B,MAAMT,EAAO,IAAQ9C,IAA8B,yBAC9C+C,QAAQ,KAAMP,EAAM1G,MAEnBuD,EAAM,IAAQD,MAAMC,IAAIC,cAAc,SAC5CD,EAAIE,aAAa,OAAQ,iBACzBF,EAAI2D,YAAY,IAAQS,UAAUC,yBAAyBlB,IAC3D,MAAMS,EAAW,IAAQC,YAAYC,gBAAgBhI,KAAMkE,GAE3DwD,EAAQO,KAAK,CACXC,SAAS,EACTP,KAAMA,EACNG,SAAUA,OAMlB,IAAQ7B,WAAWc,cACf,yBAA0BS,GAE9B,MAAMgB,EAAsB,CAS1BvF,cAAe,SAASwF,GAAc,GACpC,MAAMzE,EAAY,IAAQC,MAAMC,IAAIC,cAAc,YAqBlD,OApBIsE,GACFzE,EAAUI,aAAa,OAAQpE,KAAKsH,cAAc,SAEpDtH,KAAKkH,SAASwB,QAASC,IACrB,MAAMC,EAAW,IAAQ3E,MAAMC,IAAIC,cAAc,OAC3C0E,EAAWF,EAAQtB,MACzBuB,EAASxE,aAAa,OAAQyE,EAASlI,MACvCiI,EAASxE,aAAa,QAASyE,EAASC,SACpCL,GACFG,EAASxE,aAAa,UAAWuE,EAAQI,OAE3C/E,EAAU6D,YAAYe,KAKnB5I,KAAKgJ,gBACRhF,EAAUI,aAAa,aAAc,SAGhCJ,GAQTK,cAAe,SAASC,GAGtBtE,KAAKgJ,eAA2D,UAA1C1E,EAAWG,aAAa,cACzCzE,KAAKgJ,gBACRhJ,KAAKgG,YAAY,SAGnB,MAAMiD,EAAQ,GACRC,EAAM,GACZ,IAAK,MAAMC,KAAa7E,EAAW8E,WACO,OAApCD,EAAUE,SAASC,gBACrBL,EAAMhB,KAAKkB,EAAU1E,aAAa,SAClCyE,EAAIjB,KAAKkB,EAAU1E,aAAa,UAC5B0E,EAAU1E,aAAa,WAG/BzE,KAAK8E,aAAamE,EAAOC,IAW3BpE,aAAc,SAASmE,EAAOM,GAC5B,GAAIN,EAAMO,QAAUD,EAAOC,OACzB,MAAMC,MAAM,+CAQd,IAAK,IAAI1J,EAAIC,KAAKkH,SAASsC,OAAS,EAAGzJ,GAAK,EAAGA,IAC7CC,KAAK0J,WAAW1J,KAAKkH,SAASnH,GAAGgJ,OAEnC/I,KAAKkH,SAAW,GAChB,MAAMsC,EAASD,EAAOC,OACtB,IAAK,IAAIzJ,EAAI,EAAGA,EAAIyJ,EAAQzJ,IAC1BC,KAAK2J,QAAQV,EAAMlJ,GAAIwJ,EAAOxJ,IAEhC,IAAQ6J,WAAWC,cAAc7J,OAOnCyD,KAAM,WACJzD,KAAK2J,UACL,IAAQC,WAAWC,cAAc7J,OASnCsC,MAAO,SAASyG,GACT/I,KAAKkH,SAASsC,SAGnBxJ,KAAK0J,WAAWX,GAChB,IAAQa,WAAWC,cAAc7J,QAWnC2J,QAAS,SAAShJ,EAAO,KAAMmJ,EAAQ,MACrC,IAAK9J,KAAKkH,SAASsC,OAAQ,CACzB,MAAMO,EAAY,IAAI,IAAQC,WAC1B,IAAQnF,IAA8B,0BAC1C7E,KAAK0E,SAAS,OACTE,YAAYmF,EAAW,QAG9B,MAAM9C,EAAWjH,KAAKkH,SAASC,IAAKC,GAASA,EAAKC,MAAM1G,MACxDA,EAAOA,GAAQ,IAAQ2H,UAAU2B,8BAC7B,IAAQL,WAAWM,YAAajD,GACpC,MAAMkD,EAAW,IAAQ7B,UAAU8B,2BAC/BpK,KAAKqK,UAAWP,EAAOnJ,EAAM,IAC3BoI,EAAQ,IAAQ9E,MAAMqG,SAE5BtK,KAAKuK,aAAa5J,EAAMoI,GACpB/I,KAAK0E,SAAS,SAChB1E,KAAKoF,gBAAgB2D,EAAO,SAE5B/I,KAAKoF,gBAAgB2D,EAAO,UAG9B/I,KAAKkH,SAASe,KAAK,CACjBZ,MAAO8C,EACPpB,MAAOA,KASXW,WAAY,SAASX,GACf/I,KAAKgG,YAAY+C,GAAO,KACE,GAAxB/I,KAAKkH,SAASsC,QAChBxJ,KAAK0E,SAAS,OAAOoC,YAAY,QAEnC9G,KAAKkH,SAAWlH,KAAKkH,SAASsD,OAAQ7B,GAAYA,EAAQI,OAASA,KAYvEwB,aAAc,SAAS5J,EAAMoI,GAC3B,MAAM0B,EAAY,IAAI,IAAQC,eAAe/J,EAAMX,KAAK2K,YACxDF,EAAUG,iBAAmB5K,KAAK6K,eAAejJ,KAAK6I,GACtDA,EAAUK,gBAAkB,GAC5BL,EAAUM,iBAAmB,KAE7B/K,KAAK4G,iBAAiBmC,GACjBiC,SAAS,IAAQC,aACjBrG,YAAYxC,EAAiB2G,IAC7BnE,YAAY,IAAQC,IAAwB,oBAC5CD,YAAY6F,EAAW1B,IAS9B4B,WAAY,SAASO,GACnB,MAAMC,EAAcnL,KAAK6C,iBACnBwH,EAAYc,EAAYd,UACxBe,EAAUD,EAAYjE,SACtBmE,EAAWF,EAAYjE,SAASoE,KACjC3C,GAAYA,EAAQI,OAAS/I,KAAKW,MACjC4K,EAASF,EAAShE,MAAMyB,QAIxB0C,GADNN,EAAUA,EAAQtD,QAAQ,aAAc,KAAK6D,QAChBnC,cA+B7B,IAAK4B,IAAYE,EAAQM,MAnBLL,GAEXA,EAAStC,OAAS/I,KAAKW,MAC1B6K,GAAgBH,EAAShE,MAAM1G,KAAK2I,eAsBxC,OALItJ,KAAK+K,mBACPM,EAAShE,MAAQrH,KAAK+K,iBACtB/K,KAAK+K,iBAAmB,MAE1B,IAAQnB,WAAWC,cAAcsB,GAC1B,KAGJnL,KAAK8K,gBAAgBtB,SACxBxJ,KAAK+K,iBAAmBM,EAAShE,MAjB1BgD,EAAUsB,oBAAoBJ,GAAQG,MAAO9I,GAC3CA,EAAMgJ,IAAMT,EAAYS,IAC1BhJ,EAAMiJ,kBACHjJ,EAAMiJ,oBAAsBV,EAAYnE,kBAAkB,KAgBlEhH,KAAK8K,gBAAgB7C,KAAKsD,IAM9B,IAAIlE,EAAQgD,EAAUyB,YAAYZ,EAAS,IAa3C,OAZK7D,EAGMA,EAAM1G,MAAQuK,GAGvBb,EAAU0B,mBAAmB1E,EAAMyB,QAASoC,IAL5C7D,EAAQgD,EAAU2B,eAAed,EAAS,IAC1ClL,KAAK8K,gBAAgB7C,KAAKZ,EAAMyB,UAM9BzB,EAAMyB,SAAWyC,IACnBF,EAAShE,MAAQA,GAEnB,IAAQuC,WAAWC,cAAcsB,GAC1BD,GAQTL,eAAgB,SAASoB,GACvB,MAAMC,EAASlM,KAAK6C,iBAIdsJ,EAHWD,EAAOhF,SAASoE,KAC5B3C,GAAYA,EAAQI,OAAS/I,KAAKW,MAET0G,MAAMyB,QACpC9I,KAAK8K,gBAAgBpC,QAASkD,IACxBA,GAAMO,GACRD,EAAO7B,UAAU+B,mBAAmBR,KAGxC5L,KAAK8K,gBAAgBtB,OAAS,EAC9BxJ,KAAK+K,iBAAmB,OA6B5B,IAAQ9E,WAAWE,gBAAgB,wBAC/BqC,GAtBuB,WAUzBxI,KAAKkH,SAAW,GAMhBlH,KAAKgJ,gBAAiB,EAEtBhJ,KAAK0E,SAAS,OAAO0B,cAAc,EAAG5C,IAAmB,WAc3D,IAAQyC,WAAWoG,SAAS,oBAJJ,WACtBrM,KAAK6G,SAAS,QAAQyF,aAAa,IAAQ1C,WAAW2C,WA6ExD,IAAQtG,WAAWoG,SAAS,kBApEN,WAEpB,MAAMG,EAAQ,CAMZC,QAAS,WACP,OAAOzM,KAAKkH,SAASC,IAAKC,GAASA,EAAKC,MAAM1G,OAQhD0H,aAAc,WACZ,OAAOrI,KAAKkH,SAASC,IAAKC,GAASA,EAAKC,QAW1CqF,cAAe,SAASC,EAAOC,GAC7B,MAAMxB,EAAUpL,KAAKkH,SAASoE,KACzB3C,GAAYA,EAAQtB,MAAMyB,SAAW6D,GAC1C,IAAKvB,EACH,OAGF,MAAMyB,EAAS7M,KAAKqK,UAAUyC,gBAAgBF,GACxC1B,EAAU2B,EAAOlM,KACvBX,KAAKuK,aAAaW,EAAS0B,GAC3B5M,KAAKoF,gBAAgBwH,EAAOD,GAC5B3M,KAAKgG,YAAY2G,GACjBvB,EAAQ/D,MAAQwF,EAChB,IAAQjD,WAAWC,cAAc7J,OAWnC+M,cAAe,SAAS5C,GACtB,MAAMyB,EAAKzB,EAASrB,QACdsC,EAAUpL,KAAKkH,SAASoE,KACzB3C,GAAYA,EAAQtB,MAAMyB,SAAW8C,GACrCR,IAGLpL,KAAKgN,cAAc7C,EAASxJ,KAAMyK,EAAQrC,OAC1CqC,EAAQ/D,MAAQ8C,KAIpBnK,KAAKwM,MAAMA,GAAO;;;;;;AC9jBpB,MAAMS,EAAkB,CAKtB1G,WAAY,EAOZtD,cAAe,WACb,MAAMe,EAAY,IAAQC,MAAMC,IAAIC,cAAc,YAElD,OADAH,EAAUI,aAAa,QAASpE,KAAKuG,YAC9BvC,GAOTK,cAAe,SAASC,GACtB,MAAMC,EAAcC,SAASF,EAAWG,aAAa,SAAU,IAC/DzE,KAAK8E,aAAaP,IASpBO,aAAc,SAASP,GACrB,KAAOvE,KAAKuG,WAAahC,GACvBvE,KAAKwG,WAEP,KAAOxG,KAAKuG,WAAahC,GACvBvE,KAAKyG,cAEPzG,KAAK0G,gBAQPjD,KAAM,WACJzD,KAAKwG,WACLxG,KAAK0G,gBAQPpE,MAAO,WACkB,GAAnBtC,KAAKuG,aAGTvG,KAAKyG,cACLzG,KAAK0G,iBASPF,SAAU,WACe,GAAnBxG,KAAKuG,YACHvG,KAAK0E,SAAS,UAChB1E,KAAKgG,YAAY,SAEnBhG,KAAK2G,UAAY3G,KAAKkF,iBAAiB,MAAQlF,KAAKuG,YAC/C3B,YAAYpB,IAAmB,QAC/BoB,YAAY,IAAQC,IAAgC,6BAEzD7E,KAAKkF,iBAAiB,MAAQlF,KAAKuG,YAGrCvG,KAAKuG,cASPE,YAAa,WACXzG,KAAKuG,aACLvG,KAAKgG,YAAY,MAAQhG,KAAKuG,YACP,GAAnBvG,KAAKuG,aACPvG,KAAK2G,UAAY3G,KAAK4G,iBAAiB,SAClChC,YAAYpB,IAAmB,QAC/BoB,YAAY5E,KAAKkN,WAAU,IAC3BtI,YAAY5E,KAAKkN,WAAU,MAQpCxG,aAAc,WACZ,MAAM/D,EAAa3C,KAAK6G,SAAS,UAC5BlE,GAAc3C,KAAKuG,WAAa,EACnCvG,KAAK2G,UAAUP,cAAc,EAAGhE,IAAoB,SAC3CO,GAAc3C,KAAKuG,WAAa,GACzCvG,KAAK2G,UAAUG,YAAY,WAejC,IAAQb,WAAWC,WAAW,qBAC9B,IAAQD,WAAWE,gBAAgB,oBAC/B8G,GAPmB,WACrBjN,KAAKwM,MAAM,IAAQW,UAAUC,KAAKC,mBAClCrN,KAAK8E,aAAa","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blockly/core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"blockly/core\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"blockly/core\")) : factory(root[\"Blockly\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A function that creates a minus button used for mutation.\n */\n'use strict';\n\nimport * as Blockly from 'blockly/core';\n\n/**\n * Creates a minus image field used for mutation.\n * @param {Object=} opt_args Untyped args passed to block.minus when the field\n *     is clicked.\n * @return {Blockly.FieldImage} The minus field.\n */\nexport function createMinusField(opt_args) {\n  const minus = new Blockly.FieldImage(minusImage, 15, 15, undefined, onClick_);\n  /**\n   * Untyped args passed to block.minus when the field is clicked.\n   * @type {Object}\n   * @private\n   */\n  minus.args_ = opt_args;\n  return minus;\n}\n\n/**\n * Calls block.minus(args) when the minus field is clicked.\n * @param {Blockly.FieldImage} minusField The field being clicked.\n * @private\n */\nfunction onClick_(minusField) {\n  // TODO: This is a dupe of the mutator code, anyway to unify?\n  const block = minusField.getSourceBlock();\n\n  if (block.isInFlyout) {\n    return;\n  }\n\n  Blockly.Events.setGroup(true);\n\n  const oldMutationDom = block.mutationToDom();\n  const oldMutation = oldMutationDom && Blockly.Xml.domToText(oldMutationDom);\n\n  block.minus(minusField.args_);\n\n  const newMutationDom = block.mutationToDom();\n  const newMutation = newMutationDom && Blockly.Xml.domToText(newMutationDom);\n\n  if (oldMutation != newMutation) {\n    Blockly.Events.fire(new Blockly.Events.BlockChange(\n        block, 'mutation', null, oldMutation, newMutation));\n  }\n  Blockly.Events.setGroup(false);\n}\n\nconst minusImage =\n    'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAw' +\n    'MC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPS' +\n    'JNMTggMTFoLTEyYy0xLjEwNCAwLTIgLjg5Ni0yIDJzLjg5NiAyIDIgMmgxMmMxLjEwNCAw' +\n    'IDItLjg5NiAyLTJzLS44OTYtMi0yLTJ6IiBmaWxsPSJ3aGl0ZSIgLz48L3N2Zz4K';\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview A field for a plus button used for mutation.\n */\n'use strict';\n\nimport * as Blockly from 'blockly/core';\n\n/**\n * Creates a plus image field used for mutation.\n * @param {Object=} opt_args Untyped args passed to block.minus when the field\n *     is clicked.\n * @return {Blockly.FieldImage} The Plus field.\n */\nexport function createPlusField(opt_args) {\n  const plus = new Blockly.FieldImage(plusImage, 15, 15, undefined, onClick_);\n  /**\n   * Untyped args passed to block.plus when the field is clicked.\n   * @type {Object}\n   * @private\n   */\n  plus.args_ = opt_args;\n  return plus;\n}\n\n/**\n * Calls block.plus(args) when the plus field is clicked.\n * @param {!Blockly.FieldImage} plusField The field being clicked.\n * @private\n */\nfunction onClick_(plusField) {\n  // TODO: This is a dupe of the mutator code, anyway to unify?\n  const block = plusField.getSourceBlock();\n\n  if (block.isInFlyout) {\n    return;\n  }\n\n  Blockly.Events.setGroup(true);\n\n  const oldMutationDom = block.mutationToDom();\n  const oldMutation = oldMutationDom && Blockly.Xml.domToText(oldMutationDom);\n\n  block.plus(plusField.args_);\n\n  const newMutationDom = block.mutationToDom();\n  const newMutation = newMutationDom && Blockly.Xml.domToText(newMutationDom);\n\n  if (oldMutation != newMutation) {\n    Blockly.Events.fire(new Blockly.Events.BlockChange(\n        block, 'mutation', null, oldMutation, newMutation));\n  }\n  Blockly.Events.setGroup(false);\n}\n\nconst plusImage =\n    'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n    '9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMT' +\n    'ggMTBoLTR2LTRjMC0xLjEwNC0uODk2LTItMi0ycy0yIC44OTYtMiAybC4wNzEgNGgtNC4wNz' +\n    'FjLTEuMTA0IDAtMiAuODk2LTIgMnMuODk2IDIgMiAybDQuMDcxLS4wNzEtLjA3MSA0LjA3MW' +\n    'MwIDEuMTA0Ljg5NiAyIDIgMnMyLS44OTYgMi0ydi00LjA3MWw0IC4wNzFjMS4xMDQgMCAyLS' +\n    '44OTYgMi0ycy0uODk2LTItMi0yeiIgZmlsbD0id2hpdGUiIC8+PC9zdmc+Cg==';\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Changes the if block to use a +/- mutator UI.\n */\n\nimport Blockly from 'blockly/core';\nimport {createMinusField} from './field_minus';\nimport {createPlusField} from './field_plus';\n\nconst controlsIfMutator = {\n  // TODO: This should be its own extension. But that requires core changes.\n  suppressPrefixSuffix: true,\n\n  /**\n   * Number of else-if inputs on this block.\n   * @type {number}\n   */\n  elseIfCount_: 0,\n  /**\n   * Whether this block has an else input or not.\n   * @type {boolean}\n   */\n  hasElse_: false,\n\n  /**\n   * Creates XML to represent the number of else-if and else inputs.\n   * @return {Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    if (!this.elseIfCount_ && !this.hasElse_) {\n      return null;\n    }\n    const container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('elseif', this.elseIfCount_);\n    if (this.hasElse_) {\n      // Has to be stored as an int for backwards compat.\n      container.setAttribute('else', 1);\n    }\n    return container;\n  },\n\n  /**\n   * Parses XML to restore the else-if and else inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    const targetCount = parseInt(xmlElement.getAttribute('elseif'), 10) || 0;\n    this.hasElse_ = !!parseInt(xmlElement.getAttribute('else'), 10) || 0;\n    if (this.hasElse_ && !this.getInput('ELSE')) {\n      this.appendStatementInput('ELSE')\n          .appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSE']);\n    }\n    this.updateShape_(targetCount);\n  },\n\n  /**\n   * Adds else-if and do inputs to the block until the block matches the\n   * target else-if count.\n   * @param {number} targetCount The target number of else-if inputs.\n   * @this {Blockly.Block}\n   * @private\n   */\n  updateShape_: function(targetCount) {\n    while (this.elseIfCount_ < targetCount) {\n      this.addElseIf_();\n    }\n    while (this.elseIfCount_ > targetCount) {\n      this.removeElseIf_();\n    }\n  },\n\n  /**\n   * Callback for the plus field. Adds an else-if input to the block.\n   */\n  plus: function() {\n    this.addElseIf_();\n  },\n\n  /**\n   * Callback for the minus field. Triggers \"removing\" the input at the specific\n   * index.\n   * @see removeInput_\n   * @param {number} index The index of the else-if input to \"remove\".\n   * @this {Blockly.Block}\n   */\n  minus: function(index) {\n    if (this.elseIfCount_ == 0) {\n      return;\n    }\n    this.removeElseIf_(index);\n  },\n\n  /**\n   * Adds an else-if and a do input to the bottom of the block.\n   * @this {Blockly.Block}\n   * @private\n   */\n  addElseIf_: function() {\n    // Because else-if inputs are 1-indexed we increment first, decrement last.\n    this.elseIfCount_++;\n    this.appendValueInput('IF' + this.elseIfCount_)\n        .setCheck('Boolean')\n        .appendField(Blockly.Msg['CONTROLS_IF_MSG_ELSEIF'])\n        .appendField(\n            createMinusField(this.elseIfCount_), 'MINUS' + this.elseIfCount_);\n    this.appendStatementInput('DO' + this.elseIfCount_)\n        .appendField(Blockly.Msg['CONTROLS_IF_MSG_THEN']);\n\n    // Handle if-elseif-else block.\n    if (this.getInput('ELSE')) {\n      this.moveInputBefore('ELSE', /* put at end */ null);\n    }\n  },\n\n  /**\n   * Appears to remove the input at the given index. Actually shifts attached\n   * blocks and then removes the input at the bottom of the block. This is to\n   * make sure the inputs are always IF0, IF1, etc with no gaps.\n   * @param {number?} opt_index The index of the input to \"remove\", or undefined\n   *     to remove the last input.\n   * @this {Blockly.Block}\n   * @private\n   */\n  removeElseIf_: function(opt_index) {\n    // The strategy for removing a part at an index is to:\n    //  - Kick any blocks connected to the relevant inputs.\n    //  - Move all connect blocks from the other inputs up.\n    //  - Remove the last input.\n    // This makes sure all of our indices are correct.\n\n    if (opt_index !== undefined && opt_index!= this.elseIfCount_) {\n      // Each else-if is two inputs on the block:\n      // the else-if input and the do input.\n      const elseIfIndex = opt_index * 2;\n      const inputs = this.inputList;\n      let connection = inputs[elseIfIndex].connection; // If connection.\n      if (connection.isConnected()) {\n        connection.disconnect();\n      }\n      connection = inputs[elseIfIndex + 1].connection; // Do connection.\n      if (connection.isConnected()) {\n        connection.disconnect();\n      }\n      this.bumpNeighbours();\n      for (let i = elseIfIndex + 2, input; (input = this.inputList[i]); i++) {\n        if (input.name == 'ELSE') {\n          break; // Should be last, so break.\n        }\n        const targetConnection = input.connection.targetConnection;\n        if (targetConnection) {\n          this.inputList[i - 2].connection.connect(targetConnection);\n        }\n      }\n    }\n\n    this.removeInput('IF' + this.elseIfCount_);\n    this.removeInput('DO' + this.elseIfCount_);\n    // Because else-if inputs are 1-indexed we increment first, decrement last.\n    this.elseIfCount_--;\n  },\n};\n\n/**\n * Adds the initial plus button to the if block.\n * @this {Blockly.Block}\n */\nconst controlsIfHelper = function() {\n  this.getInput('IF0').insertFieldAt(0, createPlusField(), 'PLUS');\n};\n\nBlockly.Extensions.unregister('controls_if_mutator');\nBlockly.Extensions.registerMutator('controls_if_mutator',\n    controlsIfMutator, controlsIfHelper);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Changes the list_create block to use a +/- mutator UI.\n */\n\nimport Blockly from 'blockly/core';\nimport {createPlusField} from './field_plus';\nimport {createMinusField} from './field_minus';\n\n/* eslint-disable quotes */\nBlockly.defineBlocksWithJsonArray([\n  {\n    \"type\": \"lists_create_with\",\n    \"message0\": \"%{BKY_LISTS_CREATE_EMPTY_TITLE} %1\",\n    \"args0\": [\n      {\n        \"type\": \"input_dummy\",\n        \"name\": \"EMPTY\",\n      },\n    ],\n    \"output\": \"Array\",\n    \"style\": \"list_blocks\",\n    \"helpUrl\": \"%{BKY_LISTS_CREATE_WITH_HELPURL}\",\n    \"tooltip\": \"%{BKY_LISTS_CREATE_WITH_TOOLTIP}\",\n    \"mutator\": \"new_list_create_with_mutator\",\n  },\n]);\n/* eslint-enable quotes */\n\nconst listCreateMutator = {\n  /**\n   * Number of item inputs the block has.\n   * @type {number}\n   */\n  itemCount_: 0,\n\n  /**\n   * Creates XML to represent number of text inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    const container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('items', this.itemCount_);\n    return container;\n  },\n  /**\n   * Parses XML to restore the text inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    const targetCount = parseInt(xmlElement.getAttribute('items'), 10);\n    this.updateShape_(targetCount);\n  },\n\n  /**\n   * Adds inputs to the block until it reaches the target number of inputs.\n   * @param {number} targetCount The target number of inputs for the block.\n   * @this {Blockly.Block}\n   * @private\n   */\n  updateShape_: function(targetCount) {\n    while (this.itemCount_ < targetCount) {\n      this.addPart_();\n    }\n    while (this.itemCount_ > targetCount) {\n      this.removePart_();\n    }\n    this.updateMinus_();\n  },\n\n  /**\n   * Callback for the plus image. Adds an input to the end of the block and\n   * updates the state of the minus.\n   */\n  plus: function() {\n    this.addPart_();\n    this.updateMinus_();\n  },\n\n  /**\n   * Callback for the minus image. Removes an input from the end of the block\n   * and updates the state of the minus.\n   */\n  minus: function() {\n    if (this.itemCount_ == 0) {\n      return;\n    }\n    this.removePart_();\n    this.updateMinus_();\n  },\n\n  // To properly keep track of indices we have to increment before/after adding\n  // the inputs, and decrement the opposite.\n  // Because we want our first input to be ADD0 (not ADD1) we increment after.\n\n  /**\n   * Adds an input to the end of the block. If the block currently has no\n   * inputs it updates the top 'EMPTY' input to receive a block.\n   * @this {Blockly.Block}\n   * @private\n   */\n  addPart_: function() {\n    if (this.itemCount_ == 0) {\n      this.removeInput('EMPTY');\n      this.topInput_ = this.appendValueInput('ADD' + this.itemCount_)\n          .appendField(createPlusField(), 'PLUS')\n          .appendField(Blockly.Msg['LISTS_CREATE_WITH_INPUT_WITH']);\n    } else {\n      this.appendValueInput('ADD' + this.itemCount_);\n    }\n    this.itemCount_++;\n  },\n\n  /**\n   * Removes an input from the end of the block. If we are removing the last\n   * input this updates the block to have an 'EMPTY' top input.\n   * @this {Blockly.Block}\n   * @private\n   */\n  removePart_: function() {\n    this.itemCount_--;\n    this.removeInput('ADD' + this.itemCount_);\n    if (this.itemCount_ == 0) {\n      this.topInput_ = this.appendDummyInput('EMPTY')\n          .appendField(createPlusField(), 'PLUS')\n          .appendField(Blockly.Msg['LISTS_CREATE_EMPTY_TITLE']);\n    }\n  },\n\n  /**\n   * Makes it so the minus is visible iff there is an input available to remove.\n   * @private\n   */\n  updateMinus_: function() {\n    const minusField = this.getField('MINUS');\n    if (!minusField && this.itemCount_ > 0) {\n      this.topInput_.insertFieldAt(1, createMinusField(), 'MINUS');\n    } else if (minusField && this.itemCount_ < 1) {\n      this.topInput_.removeField('MINUS');\n    }\n  },\n};\n\n/**\n * Updates the shape of the block to have 3 inputs if no mutation is provided.\n * @this {Blockly.Block}\n */\nconst listCreateHelper = function() {\n  this.getInput('EMPTY').insertFieldAt(0, createPlusField(), 'PLUS');\n  this.updateShape_(3);\n};\n\nBlockly.Extensions.registerMutator('new_list_create_with_mutator',\n    listCreateMutator, listCreateHelper);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Changes the procedure blocks to use a +/- mutator UI.\n */\n\nimport Blockly from 'blockly/core';\nimport {createMinusField} from './field_minus';\nimport {createPlusField} from './field_plus';\n\nBlockly.Msg['PROCEDURE_VARIABLE'] = 'variable:';\n\n/* eslint-disable quotes */\nBlockly.defineBlocksWithJsonArray([\n  {\n    \"type\": \"procedures_defnoreturn\",\n    \"message0\": \"%{BKY_PROCEDURES_DEFNORETURN_TITLE} %1 %2\",\n    \"message1\": \"%{BKY_PROCEDURES_DEFNORETURN_DO} %1\",\n    \"args0\": [\n      {\n        \"type\": \"field_input\",\n        \"name\": \"NAME\",\n        \"text\": \"\",\n      },\n      {\n        \"type\": \"input_dummy\",\n        \"name\": \"TOP\",\n      },\n    ],\n    \"args1\": [\n      {\n        \"type\": \"input_statement\",\n        \"name\": \"STACK\",\n      },\n    ],\n    \"style\": \"procedure_blocks\",\n    \"helpUrl\": \"%{BKY_PROCEDURES_DEFNORETURN_HELPURL}\",\n    \"tooltip\": \"%{BKY_PROCEDURES_DEFNORETURN_TOOLTIP}\",\n    \"extensions\": [\n      \"get_procedure_def_no_return\",\n      \"procedure_context_menu\",\n      \"procedure_rename\",\n      \"procedure_vars\",\n    ],\n    \"mutator\": \"procedure_def_mutator\",\n  },\n  {\n    \"type\": \"procedures_defreturn\",\n    \"message0\": \"%{BKY_PROCEDURES_DEFRETURN_TITLE} %1 %2\",\n    \"message1\": \"%{BKY_PROCEDURES_DEFRETURN_DO} %1\",\n    \"message2\": \"%{BKY_PROCEDURES_DEFRETURN_RETURN} %1\",\n    \"args0\": [\n      {\n        \"type\": \"field_input\",\n        \"name\": \"NAME\",\n        \"text\": \"\",\n      },\n      {\n        \"type\": \"input_dummy\",\n        \"name\": \"TOP\",\n      },\n    ],\n    \"args1\": [\n      {\n        \"type\": \"input_statement\",\n        \"name\": \"STACK\",\n      },\n    ],\n    \"args2\": [\n      {\n        \"type\": \"input_value\",\n        \"align\": \"right\",\n        \"name\": \"RETURN\",\n      },\n    ],\n    \"style\": \"procedure_blocks\",\n    \"helpUrl\": \"%{BKY_PROCEDURES_DEFRETURN_HELPURL}\",\n    \"tooltip\": \"%{BKY_PROCEDURES_DEFRETURN_TOOLTIP}\",\n    \"extensions\": [\n      \"get_procedure_def_return\",\n      \"procedure_context_menu\",\n      \"procedure_rename\",\n      \"procedure_vars\",\n    ],\n    \"mutator\": \"procedure_def_mutator\",\n  },\n]);\n/* eslint-enable quotes */\n\n/**\n * Defines the what are essentially info-getters for the procedures_defnoreturn\n * block.\n * @type {{callType_: string, getProcedureDef: (function(): *[])}}\n */\nconst getDefNoReturn = {\n  /**\n   * Returns info about this block to be used by the Blockly.Procedures.\n   * @return {Array} An array of info.\n   * @this {Blockly.Block}\n   */\n  getProcedureDef: function() {\n    const argNames = this.argData_.map((elem) => elem.model.name);\n    return [this.getFieldValue('NAME'), argNames, false];\n  },\n\n  /**\n   * Used by the context menu to create a caller block.\n   * @type {string}\n   */\n  callType_: 'procedures_callnoreturn',\n};\n\nBlockly.Extensions.registerMixin('get_procedure_def_no_return', getDefNoReturn);\n\n/**\n * Defines what are essentially info-getters for the procedures_def_return\n * block.\n * @type {{callType_: string, getProcedureDef: (function(): *[])}}\n */\nconst getDefReturn = {\n  /**\n   * Returns info about this block to be used by the Blockly.Procedures.\n   * @return {Array} An array of info.\n   * @this {Blockly.Block}\n   */\n  getProcedureDef: function() {\n    const argNames = this.argData_.map((elem) => elem.model.name);\n    return [this.getFieldValue('NAME'), argNames, true];\n  },\n  /**\n   * Used by the context menu to create a caller block.\n   * @type {string}\n   */\n  callType_: 'procedures_callreturn',\n};\n\nBlockly.Extensions.registerMixin('get_procedure_def_return', getDefReturn);\n\nconst procedureContextMenu = {\n  /**\n   * Adds an option to create a caller block.\n   * Adds an option to create a variable getter for each variable included in\n   * the procedure definition.\n   * @this {Blockly.Block}\n   * @param {!Array} options The current options for the context menu.\n   */\n  customContextMenu: function(options) {\n    if (this.isInFlyout) {\n      return;\n    }\n\n    // Add option to create caller.\n    const name = this.getFieldValue('NAME');\n    const text = Blockly.Msg['PROCEDURES_CREATE_DO'].replace('%1', name);\n\n    const xml = Blockly.utils.xml.createElement('block');\n    xml.setAttribute('type', this.callType_);\n    xml.appendChild(this.mutationToDom(true));\n    const callback = Blockly.ContextMenu.callbackFactory(this, xml);\n\n    options.push({\n      enabled: true,\n      text: text,\n      callback: callback,\n    });\n\n    if (this.isCollapsed()) {\n      return;\n    }\n\n    // Add options to create getters for each parameter.\n    const varModels = this.getVarModels();\n    for (const model of varModels) {\n      const text = Blockly.Msg['VARIABLES_SET_CREATE_GET']\n          .replace('%1', model.name);\n\n      const xml = Blockly.utils.xml.createElement('block');\n      xml.setAttribute('type', 'variables_get');\n      xml.appendChild(Blockly.Variables.generateVariableFieldDom(model));\n      const callback = Blockly.ContextMenu.callbackFactory(this, xml);\n\n      options.push({\n        enabled: true,\n        text: text,\n        callback: callback,\n      });\n    }\n  },\n};\n\nBlockly.Extensions.registerMixin(\n    'procedure_context_menu', procedureContextMenu);\n\nconst procedureDefMutator = {\n  /**\n   * Create XML to represent the argument inputs.\n   * @param {boolean=} isForCaller If true include the procedure name and\n   *     argument IDs. Used by Blockly.Procedures.mutateCallers for\n   *     reconnection.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function(isForCaller = false) {\n    const container = Blockly.utils.xml.createElement('mutation');\n    if (isForCaller) {\n      container.setAttribute('name', this.getFieldValue('NAME'));\n    }\n    this.argData_.forEach((element) => {\n      const argument = Blockly.utils.xml.createElement('arg');\n      const argModel = element.model;\n      argument.setAttribute('name', argModel.name);\n      argument.setAttribute('varid', argModel.getId());\n      if (isForCaller) {\n        argument.setAttribute('paramid', element.argId);\n      }\n      container.appendChild(argument);\n    });\n\n    // Not used by this block, but necessary if switching back and forth\n    // between this mutator UI and the default UI.\n    if (!this.hasStatements_) {\n      container.setAttribute('statements', 'false');\n    }\n\n    return container;\n  },\n\n  /**\n   * Parse XML to restore the argument inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    // We have to handle this so that the user doesn't add blocks to the stack,\n    // in which case it would be impossible to return to the old mutators.\n    this.hasStatements_ = xmlElement.getAttribute('statements') !== 'false';\n    if (!this.hasStatements_) {\n      this.removeInput('STACK');\n    }\n\n    const names = [];\n    const ids = [];\n    for (const childNode of xmlElement.childNodes) {\n      if (childNode.nodeName.toLowerCase() == 'arg') {\n        names.push(childNode.getAttribute('name'));\n        ids.push(childNode.getAttribute('varid') ||\n            childNode.getAttribute('varId'));\n      }\n    }\n    this.updateShape_(names, ids);\n  },\n\n  /**\n   * Adds arguments to the block until it matches the targets.\n   * @param {!Array<string>} names An array of argument names to display.\n   * @param {!Array<string>} varIds An array of variable IDs associated with\n   *     those names.\n   * @this {Blockly.Block}\n   * @private\n   */\n  updateShape_: function(names, varIds) {\n    if (names.length != varIds.length) {\n      throw Error('names and varIds must have the same length.');\n    }\n    // Usually it's more efficient to modify the block, rather than tearing it\n    // down and rebuilding (less render calls), but in this case it's easier\n    // to just work from scratch.\n\n    // We need to remove args in reverse order so that it doesn't mess up\n    // as removeArg_ modifies our array.\n    for (let i = this.argData_.length - 1; i >= 0; i--) {\n      this.removeArg_(this.argData_[i].argId);\n    }\n    this.argData_ = [];\n    const length = varIds.length;\n    for (let i = 0; i < length; i++) {\n      this.addArg_(names[i], varIds[i]);\n    }\n    Blockly.Procedures.mutateCallers(this);\n  },\n\n  /**\n   * Callback for the plus image. Adds an argument to the block and mutates\n   * callers to match.\n   */\n  plus: function() {\n    this.addArg_();\n    Blockly.Procedures.mutateCallers(this);\n  },\n\n  /**\n   * Callback for the minus image. Removes the argument associated with the\n   * given argument ID and mutates the callers to match.\n   * @param {string} argId The argId of the argument to remove.\n   * @this {Blockly.Block}\n   */\n  minus: function(argId) {\n    if (!this.argData_.length) {\n      return;\n    }\n    this.removeArg_(argId);\n    Blockly.Procedures.mutateCallers(this);\n  },\n\n  /**\n   * Adds an argument to the block and updates the block's parallel tracking\n   * arrays as appropriate.\n   * @param {?string=} name An optional name for the argument.\n   * @param {?string=} varId An optional variable ID for the argument.\n   * @this {Blockly.Block}\n   * @private\n   */\n  addArg_: function(name = null, varId = null) {\n    if (!this.argData_.length) {\n      const withField = new Blockly.FieldLabel(\n          Blockly.Msg['PROCEDURES_BEFORE_PARAMS']);\n      this.getInput('TOP')\n          .appendField(withField, 'WITH');\n    }\n\n    const argNames = this.argData_.map((elem) => elem.model.name);\n    name = name || Blockly.Variables.generateUniqueNameFromOptions(\n        Blockly.Procedures.DEFAULT_ARG, argNames);\n    const variable = Blockly.Variables.getOrCreateVariablePackage(\n        this.workspace, varId, name, '');\n    const argId = Blockly.utils.genUid();\n\n    this.addVarInput_(name, argId);\n    if (this.getInput('STACK')) {\n      this.moveInputBefore(argId, 'STACK');\n    } else {\n      this.moveInputBefore(argId, 'RETURN');\n    }\n\n    this.argData_.push({\n      model: variable,\n      argId: argId,\n    });\n  },\n\n  /**\n   * Removes the argument associated with the given argument ID from the block.\n   * @param {string} argId An ID used to track arguments on the block.\n   * @private\n   */\n  removeArg_: function(argId) {\n    if (this.removeInput(argId, true)) {\n      if (this.argData_.length == 1) { // Becoming argumentless.\n        this.getInput('TOP').removeField('WITH');\n      }\n      this.argData_ = this.argData_.filter((element) => element.argId != argId);\n    }\n  },\n\n  /**\n   * Appends the actual inputs and fields associated with an argument to the\n   * block.\n   * @param {string} name The name of the argument.\n   * @param {string} argId The UUID of the argument (different from var ID).\n   * @this {Blockly.Block}\n   * @private\n   */\n  addVarInput_: function(name, argId) {\n    const nameField = new Blockly.FieldTextInput(name, this.validator_);\n    nameField.onFinishEditing_ = this.finishEditing_.bind(nameField);\n    nameField.varIdsToDelete_ = [];\n    nameField.preEditVarModel_ = null;\n\n    this.appendDummyInput(argId)\n        .setAlign(Blockly.ALIGN_RIGHT)\n        .appendField(createMinusField(argId))\n        .appendField(Blockly.Msg['PROCEDURE_VARIABLE']) // Untranslated!\n        .appendField(nameField, argId); // The name of the field is the arg id.\n  },\n\n  /**\n   * Validates text entered into the argument name field.\n   * @param {string} newName The new text entered into the field.\n   * @return {?string} The field's new value.\n   * @this Blockly.FieldTextInput\n   */\n  validator_: function(newName) {\n    const sourceBlock = this.getSourceBlock();\n    const workspace = sourceBlock.workspace;\n    const argData = sourceBlock.argData_;\n    const argDatum = sourceBlock.argData_.find(\n        (element) => element.argId == this.name);\n    const currId = argDatum.model.getId();\n\n    // Replace all whitespace with normal spaces, then trim.\n    newName = newName.replace(/[\\s\\xa0]+/g, ' ').trim();\n    const caselessName = newName.toLowerCase();\n\n    /**\n     * Returns true if the given argDatum is associated with this field, or has\n     * a different caseless name than the argDatum associated with this field.\n     * @param {{model: Blockly.VariableModel, argId:string}} argDatum The\n     *     argDatum we want to make sure does not conflict with the argDatum\n     *     associated with this field.\n     * @return {boolean} True if the given datum does not conflict with the\n     *     datum associated with this field.\n     * @this Blockly.FieldTextInput\n     */\n    const hasDifName = (argDatum) => {\n      // The field name (aka id) is always equal to the arg id.\n      return argDatum.argId == this.name ||\n          caselessName != argDatum.model.name.toLowerCase();\n    };\n    /**\n     * Returns true if the variable associated with this field is only used\n     * by this block, or callers of this procedure.\n     * @return {boolean} True if the variable associated with this field is only\n     *     used by this block, or callers of this procedure.\n     */\n    const varOnlyUsedHere = () => {\n      return workspace.getVariableUsesById(currId).every((block) => {\n        return block.id == sourceBlock.id ||\n            (block.getProcedureCall &&\n                block.getProcedureCall() == sourceBlock.getProcedureDef()[0]);\n      });\n    };\n\n    if (!newName || !argData.every(hasDifName)) {\n      if (this.preEditVarModel_) {\n        argDatum.model = this.preEditVarModel_;\n        this.preEditVarModel_ = null;\n      }\n      Blockly.Procedures.mutateCallers(sourceBlock);\n      return null;\n    }\n\n    if (!this.varIdsToDelete_.length) {\n      this.preEditVarModel_ = argDatum.model;\n      if (varOnlyUsedHere()) {\n        this.varIdsToDelete_.push(currId);\n      }\n    }\n\n    // Create new vars instead of renaming the old ones, so users can't\n    // accidentally rename/coalesce vars.\n    let model = workspace.getVariable(newName, '');\n    if (!model) {\n      model = workspace.createVariable(newName, '');\n      this.varIdsToDelete_.push(model.getId());\n    } else if (model.name != newName) {\n      // Blockly is case-insensitive so we have to update the var instead of\n      // creating a new one.\n      workspace.renameVariableById(model.getId(), newName);\n    }\n    if (model.getId() != currId) {\n      argDatum.model = model;\n    }\n    Blockly.Procedures.mutateCallers(sourceBlock);\n    return newName;\n  },\n\n  /**\n   * Removes any unused vars that were created as a result of editing.\n   * @param {string} _finalName The final value of the field.\n   * @this Blockly.FieldTextInput\n   */\n  finishEditing_: function(_finalName) {\n    const source = this.getSourceBlock();\n    const argDatum = source.argData_.find(\n        (element) => element.argId == this.name);\n\n    const currentVarId = argDatum.model.getId();\n    this.varIdsToDelete_.forEach((id) => {\n      if (id != currentVarId) {\n        source.workspace.deleteVariableById(id);\n      }\n    });\n    this.varIdsToDelete_.length = 0;\n    this.preEditVarModel_ = null;\n  },\n};\n\n/**\n * Initializes some private variables for procedure blocks.\n * @this {Blockly.Block}\n */\nconst procedureDefHelper = function() {\n  /**\n   * An array of objects containing data about the args belonging to the\n   * procedure definition.\n   * @type {!Array<{\n   *          model:Blockly.VariableModel,\n   *          argId: string\n   *       }>}\n   * @private\n   */\n  this.argData_ = [];\n  /**\n   * Does this block have a 'STACK' input for statements?\n   * @type {boolean}\n   * @private\n   */\n  this.hasStatements_ = true;\n\n  this.getInput('TOP').insertFieldAt(0, createPlusField(), 'PLUS');\n};\n\nBlockly.Extensions.registerMutator('procedure_def_mutator',\n    procedureDefMutator, procedureDefHelper);\n\n/**\n * Sets the validator for the procedure's name field.\n * @this {Blockly.Block}\n */\nconst procedureRename = function() {\n  this.getField('NAME').setValidator(Blockly.Procedures.rename);\n};\n\nBlockly.Extensions.register('procedure_rename', procedureRename);\n\n/**\n * Defines functions for dealing with variables and renaming variables.\n * @this {Blockly.Block}\n */\nconst procedureVars = function() {\n  // This is a hack to get around the don't-override-builtins check.\n  const mixin = {\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<string>} List of variable names.\n     * @this {Blockly.Block}\n     */\n    getVars: function() {\n      return this.argData_.map((elem) => elem.model.name);\n    },\n\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n     * @this {Blockly.Block}\n     */\n    getVarModels: function() {\n      return this.argData_.map((elem) => elem.model);\n    },\n\n    /**\n     * Notification that a variable was renamed to the same name as an existing\n     * variable. These variables are coalescing into a single variable with the\n     * ID of the variable that was already using the name.\n     * @param {string} oldId The ID of the variable that was renamed.\n     * @param {string} newId The ID of the variable that was already using\n     *     the name.\n     */\n    renameVarById: function(oldId, newId) {\n      const argData = this.argData_.find(\n          (element) => element.model.getId() == oldId);\n      if (!argData) {\n        return; // Not on this block.\n      }\n\n      const newVar = this.workspace.getVariableById(newId);\n      const newName = newVar.name;\n      this.addVarInput_(newName, newId);\n      this.moveInputBefore(newId, oldId);\n      this.removeInput(oldId);\n      argData.model = newVar;\n      Blockly.Procedures.mutateCallers(this);\n    },\n\n    /**\n     * Notification that a variable is renaming but keeping the same ID.  If the\n     * variable is in use on this block, rerender to show the new name.\n     * @param {!Blockly.VariableModel} variable The variable being renamed.\n     * @package\n     * @override\n     * @this {Blockly.Block}\n     */\n    updateVarName: function(variable) {\n      const id = variable.getId();\n      const argData = this.argData_.find(\n          (element) => element.model.getId() == id);\n      if (!argData) {\n        return; // Not on this block.\n      }\n      this.setFieldValue(variable.name, argData.argId);\n      argData.model = variable;\n    },\n  };\n\n  this.mixin(mixin, true);\n};\n\nBlockly.Extensions.register('procedure_vars', procedureVars);\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Changes the text_join block to use a +/- mutator UI.\n */\n\nimport Blockly from 'blockly/core';\nimport {createPlusField} from './field_plus';\nimport {createMinusField} from './field_minus';\n\nconst textJoinMutator = {\n  /**\n   * Number of text inputs on this block.\n   * @type {number}\n   */\n  itemCount_: 0,\n\n  /**\n   * Creates XML to represent number of inputs.\n   * @return {!Element} XML storage element.\n   * @this {Blockly.Block}\n   */\n  mutationToDom: function() {\n    const container = Blockly.utils.xml.createElement('mutation');\n    container.setAttribute('items', this.itemCount_);\n    return container;\n  },\n  /**\n   * Parses XML to restore the inputs.\n   * @param {!Element} xmlElement XML storage element.\n   * @this {Blockly.Block}\n   */\n  domToMutation: function(xmlElement) {\n    const targetCount = parseInt(xmlElement.getAttribute('items'), 10);\n    this.updateShape_(targetCount);\n  },\n\n  /**\n   * Adds inputs to the block until the block reaches the target input count.\n   * @param {number} targetCount The number of inputs the block should have.\n   * @this {Blockly.Block}\n   * @private\n   */\n  updateShape_: function(targetCount) {\n    while (this.itemCount_ < targetCount) {\n      this.addPart_();\n    }\n    while (this.itemCount_ > targetCount) {\n      this.removePart_();\n    }\n    this.updateMinus_();\n  },\n\n  /**\n   * Callback for the plus image. Adds an input to the block and updates the\n   * state of the minus.\n   * @this {Blockly.Block}\n   */\n  plus: function() {\n    this.addPart_();\n    this.updateMinus_();\n  },\n\n  /**\n   * Callback for the minus image. Removes the input at the end of the block and\n   * updates the state of the minus.\n   * @this {Blockly.Block}\n   */\n  minus: function() {\n    if (this.itemCount_ == 0) {\n      return;\n    }\n    this.removePart_();\n    this.updateMinus_();\n  },\n\n  /**\n   * Adds an input to the end of the block. If the block currently has no\n   * inputs it updates the top 'EMPTY' input to receive a block.\n   * @this {Blockly.Block}\n   * @private\n   */\n  addPart_: function() {\n    if (this.itemCount_ == 0) {\n      if (this.getInput('EMPTY')) {\n        this.removeInput('EMPTY');\n      }\n      this.topInput_ = this.appendValueInput('ADD' + this.itemCount_)\n          .appendField(createPlusField(), 'PLUS')\n          .appendField(Blockly.Msg['TEXT_JOIN_TITLE_CREATEWITH']);\n    } else {\n      this.appendValueInput('ADD' + this.itemCount_);\n    }\n    // Because item inputs are 0-index we decrement first, increment last.\n    this.itemCount_++;\n  },\n\n  /**\n   * Removes an input from the end of the block. If we are removing the last\n   * input this updates the block to have an 'EMPTY' top input.\n   * @this {Blockly.Block}\n   * @private\n   */\n  removePart_: function() {\n    this.itemCount_--;\n    this.removeInput('ADD' + this.itemCount_);\n    if (this.itemCount_ == 0) {\n      this.topInput_ = this.appendDummyInput('EMPTY')\n          .appendField(createPlusField(), 'PLUS')\n          .appendField(this.newQuote_(true))\n          .appendField(this.newQuote_(false));\n    }\n  },\n\n  /**\n   * Makes it so the minus is visible iff there is an input available to remove.\n   * @private\n   */\n  updateMinus_: function() {\n    const minusField = this.getField('MINUS');\n    if (!minusField && this.itemCount_ > 0) {\n      this.topInput_.insertFieldAt(1, createMinusField(), 'MINUS');\n    } else if (minusField && this.itemCount_ < 1) {\n      this.topInput_.removeField('MINUS');\n    }\n  },\n};\n\n/**\n * Adds the quotes mixin to the block. Also updates the shape so that if no\n * mutator is provided the block has two inputs.\n * @this {Blockly.Block}\n */\nconst textJoinHelper = function() {\n  this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);\n  this.updateShape_(2);\n};\n\nBlockly.Extensions.unregister('text_join_mutator');\nBlockly.Extensions.registerMutator('text_join_mutator',\n    textJoinMutator, textJoinHelper);\n"],"sourceRoot":""}
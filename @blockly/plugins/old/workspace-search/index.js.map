{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external {\"root\":\"Blockly\",\"commonjs\":\"blockly/core\",\"commonjs2\":\"blockly/core\",\"amd\":\"blockly/core\"}","webpack:///./src/css.js","webpack:///./src/WorkspaceSearch.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CSS_CONTENT","injectSearchCss","executed","text","join","cssNode","document","createElement","id","cssTextNode","createTextNode","appendChild","head","insertBefore","firstChild","workspace","workspace_","htmlDiv_","actionDiv_","inputElement_","textInputPlaceholder_","blocks_","currentBlockIndex_","searchText_","searchOnInput","caseSensitive","preserveSelected","boundEvents_","getComponentManager","addComponent","component","weight","capabilities","Capability","POSITIONABLE","createDom_","setVisible_","resize","event","remove","injectionDiv","getInjectionDiv","addEvent_","evt","onWorkspaceKeyDown_","dom","addClass","searchContainer","searchContent","inputWrapper","createTextInput_","onKeyDown_","onInput_","searchAndHighlight","nextBtn","createNextBtn_","addActionBtn","next","previousBtn","createPreviousBtn_","previous","closeBtn","createCloseBtn_","addBtnListener_","close","getParentSvg","node","thisObject","func","push","btn","onClickFn","textInput","type","setAttribute","createBtn_","className","e","keyCode","KeyCodes","ENTER","preventDefault","ESC","stopPropagation","top","style","left","Rect","height","width","metrics","savedPositions","RTL","absoluteMetrics","toolboxMetrics","position","right","inputValue","trim","ctrlKey","metaKey","F","open","setCurrentBlock_","placeholderText","index","length","currentBlock","unhighlightCurrentSelection_","highlightCurrentSelection_","scrollToVisible_","focus","markFocused","clearBlocks","show","display","searchText","preserveCurrent","oldCurrentBlock","getMatchingBlocks_","highlightSearchGroup_","currentIdx","indexOf","getAllBlocks","filter","block","surroundParent","getSurroundParent","isCollapsed","blockText","toString","topBlockText","inputList","forEach","input","fieldRow","field","getText","toLowerCase","getSearchPool_","isBlockMatch_","unhighlightSearchGroup_","path","pathObject","svgPath","removeClass","blocks","blockPath","isMovable","xy","getRelativeToSurfaceXY","scale","y","bottom","x","getMetrics","targetLeft","viewLeft","overflowLeft","overflowRight","viewWidth","wideBlock","targetTop","viewTop","overflowTop","overflowBottom","viewHeight","tallBlock","activeEl","activeElement","scroll"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blockly/core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"blockly/core\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"blockly/core\")) : factory(root[\"Blockly\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Styling for workspace search.\n * @author aschmiedt@google.com (Abby Schmiedt)\n * @author kozbial@google.com (Monica Kozbial)\n */\n\n/**\n * Base64 encoded data uri for close icon.\n * @type {string}\n */\nconst CLOSE_SVG_DATAURI =\n    'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n    '9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aC' +\n    'BkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNS' +\n    'AxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPj' +\n    'xwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4=';\n\n/**\n * Base64 encoded data uri for keyboard arrow down icon.\n * @type {string}\n */\nconst ARROW_DOWN_SVG_DATAURI =\n    'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n    '9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aC' +\n    'BkPSJNNy40MSA4LjU5TDEyIDEzLjE3bDQuNTktNC41OEwxOCAxMGwtNiA2LTYtNiAxLjQxLT' +\n    'EuNDF6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PC9zdmc+';\n\n/**\n * Base64 encoded data uri for keyboard arrow up icon.\n * @type {string}\n */\nconst ARROW_UP_ARROW_SVG_DATAURI =\n    'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n    '9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aC' +\n    'BkPSJNNy40MSAxNS40MUwxMiAxMC44M2w0LjU5IDQuNThMMTggMTRsLTYtNi02IDZ6Ii8+PH' +\n    'BhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==';\n\n/**\n * CSS for workspace search.\n * @type {Array.<string>}\n */\nconst CSS_CONTENT = [\n  /* eslint-disable indent */\n  'path.blocklyPath.blockly-ws-search-highlight {',\n    'fill: black;',\n  '}',\n  'path.blocklyPath.blockly-ws-search-highlight.blockly-ws-search-current {',\n    'fill: grey;',\n  '}',\n  '.blockly-ws-search-close-btn {',\n    'background: url(' + CLOSE_SVG_DATAURI + ') no-repeat top left;',\n  '}',\n  '.blockly-ws-search-next-btn {',\n    'background: url(' + ARROW_DOWN_SVG_DATAURI + ') no-repeat top left;',\n  '}',\n  '.blockly-ws-search-previous-btn {',\n    'background: url(' +ARROW_UP_ARROW_SVG_DATAURI + ') no-repeat top left;',\n  '}',\n  '.blockly-ws-search {',\n    'background: white;',\n    'border: solid lightgrey .5px;',\n    'box-shadow: 0px 10px 20px grey;',\n    'justify-content: center;',\n    'padding: .25em;',\n    'position: absolute;',\n    'z-index: 70;',\n  '}',\n  '.blockly-ws-search-input input {',\n    'border: none;',\n  '}',\n  '.blockly-ws-search button {',\n    'border: none;',\n  '}',\n  '.blockly-ws-search-actions {',\n    'display: flex;',\n  '}',\n  '.blockly-ws-search-container {',\n    'display: flex;',\n  '}',\n  '.blockly-ws-search-content {',\n    'display: flex;',\n  '}',\n  /* eslint-enable indent */\n];\n\n/**\n * Injects CSS for workspace search.\n */\nexport const injectSearchCss = (function() {\n  let executed = false;\n  return function() {\n    // Only inject the CSS once.\n    if (executed) {\n      return;\n    }\n    executed = true;\n    const text = CSS_CONTENT.join('\\n');\n    // Inject CSS tag at start of head.\n    const cssNode = document.createElement('style');\n    cssNode.id = 'blockly-ws-search-style';\n    const cssTextNode = document.createTextNode(text);\n    cssNode.appendChild(cssTextNode);\n    document.head.insertBefore(cssNode, document.head.firstChild);\n  };\n})();\n","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Class responsible for workspace search.\n * @author aschmiedt@google.com (Abby Schmiedt)\n * @author kozbial@google.com (Monica Kozbial)\n */\n\n\nimport {injectSearchCss} from './css.js';\nimport * as Blockly from 'blockly/core';\n\n/**\n * Class for workspace search.\n * @implements {Blockly.IPositionable}\n */\nexport class WorkspaceSearch {\n  /**\n   * Class for workspace search.\n   * @param {!Blockly.WorkspaceSvg} workspace The workspace the search bar sits\n   *     in.\n   */\n  constructor(workspace) {\n    /**\n     * The workspace the search bar sits in.\n     * @type {!Blockly.WorkspaceSvg}\n     * @private\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * The unique id for this component.\n     * @type {string}\n     */\n    this.id = 'workspaceSearch';\n\n    /**\n     * HTML container for the search bar.\n     * @type {?HTMLElement}\n     * @private\n     */\n    this.htmlDiv_ = null;\n\n    /**\n     * The div that holds the search bar actions.\n     * @type {?HTMLElement}\n     * @protected\n     */\n    this.actionDiv_ = null;\n\n    /**\n     * The text input for the search bar.\n     * @type {?HTMLInputElement}\n     * @private\n     */\n    this.inputElement_ = null;\n\n    /**\n     * The placeholder text for the search bar input.\n     * @type {string}\n     * @private\n     */\n    this.textInputPlaceholder_ = 'Search';\n\n    /**\n     * A list of blocks that came up in the search.\n     * @type {!Array.<Blockly.BlockSvg>}\n     * @protected\n     */\n    this.blocks_ = [];\n\n    /**\n     * Index of the currently \"selected\" block in the blocks array.\n     * @type {number}\n     * @protected\n     */\n    this.currentBlockIndex_ = -1;\n\n    /**\n     * The search text.\n     * @type {string}\n     * @protected\n     */\n    this.searchText_ = '';\n\n    /**\n     * Whether to search as input changes as opposed to on enter.\n     * @type {boolean}\n     */\n    this.searchOnInput = true;\n\n    /**\n     * Whether search should be case sensitive.\n     * @type {boolean}\n     */\n    this.caseSensitive = false;\n\n    /**\n     * Whether search should preserve the currently selected block by default.\n     * @type {boolean}\n     */\n    this.preserveSelected = true;\n\n    /**\n     * Array holding info needed to unbind events.\n     * Used for disposing.\n     * Ex: [[node, name, func], [node, name, func]].\n     * @type {!Array.<Array<?>>}\n     * @private\n     */\n    this.boundEvents_ = [];\n  }\n\n  /**\n   * Initializes the workspace search bar.\n   */\n  init() {\n    this.workspace_.getComponentManager().addComponent({\n      component: this,\n      weight: 0,\n      capabilities: [Blockly.ComponentManager.Capability.POSITIONABLE],\n    });\n    injectSearchCss();\n    this.createDom_();\n    this.setVisible_(false);\n\n    this.workspace_.resize();\n  }\n\n  /**\n   * Disposes of workspace search.\n   * Unlink from all DOM elements and remove all event listeners\n   * to prevent memory leaks.\n   */\n  dispose() {\n    for (const event of this.boundEvents_) {\n      Blockly.unbindEvent_(event);\n    }\n    this.boundEvents_ = null;\n    if (this.htmlDiv_) {\n      this.htmlDiv_.remove();\n      this.htmlDiv_ = null;\n    }\n    this.actionDiv_ = null;\n    this.inputElement_ = null;\n  }\n\n  /**\n   * Creates and injects the search bar's DOM.\n   * @protected\n   */\n  createDom_() {\n    /*\n     * Creates the search bar. The generated search bar looks like:\n     * <div class=\"ws-search'>\n     *   <div class=\"ws-search-container'>\n     *     <div class=\"ws-search-content'>\n     *       <div class=\"ws-search-input'>\n     *         [... text input goes here ...]\n     *       </div>\n     *       [... actions div goes here ...]\n     *     </div>\n     *     [... close button goes here ...]\n     *   </div>\n     * </div>\n     */\n    const injectionDiv = this.workspace_.getInjectionDiv();\n    this.addEvent_(injectionDiv, 'keydown', this, (evt) => this\n        .onWorkspaceKeyDown_(/** @type {KeyboardEvent} */ evt));\n\n    this.htmlDiv_ = document.createElement('div');\n    Blockly.utils.dom.addClass(this.htmlDiv_, 'blockly-ws-search');\n\n    const searchContainer = document.createElement('div');\n    Blockly.utils.dom.addClass(searchContainer, 'blockly-ws-search-container');\n\n    const searchContent = document.createElement('div');\n    Blockly.utils.dom.addClass(searchContent, 'blockly-ws-search-content');\n    searchContainer.appendChild(searchContent);\n\n    const inputWrapper = document.createElement('div');\n    Blockly.utils.dom.addClass(inputWrapper, 'blockly-ws-search-input');\n    this.inputElement_ = this.createTextInput_();\n    this.addEvent_(this.inputElement_, 'keydown', this, (evt) => this\n        .onKeyDown_(/** @type {KeyboardEvent} */ evt));\n    this.addEvent_(this.inputElement_, 'input', this, () =>this\n        .onInput_());\n    this.addEvent_(this.inputElement_, 'click', this, () => this\n        .searchAndHighlight(this.searchText_, this.preserveSelected));\n\n    inputWrapper.appendChild(this.inputElement_);\n    searchContent.appendChild(inputWrapper);\n\n    this.actionDiv_ = document.createElement('div');\n    Blockly.utils.dom.addClass(this.actionDiv_, 'blockly-ws-search-actions');\n    searchContent.appendChild(this.actionDiv_);\n\n    const nextBtn = this.createNextBtn_();\n    if (nextBtn) {\n      this.addActionBtn(nextBtn, () => this.next());\n    }\n\n    const previousBtn = this.createPreviousBtn_();\n    if (previousBtn) {\n      this.addActionBtn(previousBtn, () => this.previous());\n    }\n\n    const closeBtn = this.createCloseBtn_();\n    if (closeBtn) {\n      this.addBtnListener_(closeBtn, () => this.close());\n      searchContainer.appendChild(closeBtn);\n    }\n\n    this.htmlDiv_.appendChild(searchContainer);\n\n    injectionDiv.insertBefore(this.htmlDiv_, this.workspace_.getParentSvg());\n  }\n\n  /**\n   * Helper method for adding an event.\n   * @param {!Element} node Node upon which to listen.\n   * @param {string} name Event name to listen to (e.g. 'mousedown').\n   * @param {Object} thisObject The value of 'this' in the function.\n   * @param {!Function} func Function to call when event is triggered.\n   * @private\n   */\n  addEvent_(node, name, thisObject, func) {\n    const event = Blockly.bindEventWithChecks_(node, name, thisObject, func);\n    this.boundEvents_.push(event);\n  }\n\n  /**\n   * Add a button to the action div. This must be called after the init function\n   * has been called.\n   * @param {!HTMLButtonElement} btn The button to add the event listener to.\n   * @param {!Function} onClickFn The function to call when the user clicks on\n   *     or hits enter on the button.\n   */\n  addActionBtn(btn, onClickFn) {\n    this.addBtnListener_(btn, onClickFn);\n    this.actionDiv_.appendChild(btn);\n  }\n\n  /**\n   * Creates the text input for the search bar.\n   * @return {!HTMLInputElement} A text input for the search bar.\n   * @protected\n   */\n  createTextInput_() {\n    const textInput = document.createElement('input');\n    textInput.type = 'text';\n    textInput.setAttribute('placeholder', this.textInputPlaceholder_);\n    return textInput;\n  }\n\n  /**\n   * Creates the button used to get the next block in the list.\n   * @return {!HTMLButtonElement} The next button.\n   * @protected\n   */\n  createNextBtn_() {\n    return this.createBtn_('blockly-ws-search-next-btn', 'Find next');\n  }\n\n  /**\n   * Creates the button used to get the previous block in the list.\n   * @return {!HTMLButtonElement} The previous button.\n   * @protected\n   */\n  createPreviousBtn_() {\n    return this.createBtn_('blockly-ws-search-previous-btn', 'Find previous');\n  }\n\n  /**\n   * Creates the button used for closing the search bar.\n   * @return {!HTMLButtonElement} A button for closing the search bar.\n   * @protected\n   */\n  createCloseBtn_() {\n    return this.createBtn_('blockly-ws-search-close-btn', 'Close search bar');\n  }\n\n  /**\n   * Creates a button for the workspace search bar.\n   * @param {string} className The class name for the button.\n   * @param {string} text The text to display to the screen reader.\n   * @return {!HTMLButtonElement} The created button.\n   * @private\n   */\n  createBtn_(className, text) {\n    // Create the button\n    const btn = document.createElement('button');\n    Blockly.utils.dom.addClass(btn, className);\n    btn.setAttribute('aria-label', text);\n    return btn;\n  }\n\n  /**\n   * Add event listener for clicking and keydown on the given button.\n   * @param {!HTMLButtonElement} btn The button to add the event listener to.\n   * @param {!Function} onClickFn The function to call when the user clicks on\n   *      or hits enter on the button.\n   * @private\n   */\n  addBtnListener_(btn, onClickFn) {\n    this.addEvent_(btn, 'click', this, onClickFn);\n    // TODO: Review Blockly's key handling to see if there is a way to avoid\n    //  needing to call stopPropogation().\n    this.addEvent_(btn, 'keydown', this, (e) => {\n      if (e.keyCode === Blockly.utils.KeyCodes.ENTER) {\n        onClickFn(e);\n        e.preventDefault();\n      } else if (e.keyCode === Blockly.utils.KeyCodes.ESC) {\n        this.close();\n      }\n      e.stopPropagation();\n    });\n  }\n\n  /**\n   * Returns the bounding rectangle of the UI element in pixel units relative to\n   * the Blockly injection div.\n   * @return {!Blockly.utils.Rect} The component’s bounding box.\n   */\n  getBoundingRectangle() {\n    const top = this.htmlDiv_.style.top;\n    const left = this.htmlDiv_.style.left;\n    return new Blockly.utils.Rect(\n        top, top + this.htmlDiv_.style.height,\n        left, left + this.htmlDiv_.style.width);\n  }\n\n  /**\n   * Positions the zoom-to-fit control.\n   * It is positioned in the opposite corner to the corner the\n   * categories/toolbox starts at.\n   * @param {!Blockly.MetricsManager.UiMetrics} metrics The workspace metrics.\n   * @param {!Array<!Blockly.utils.Rect>} savedPositions List of rectangles that\n   *     are already on the workspace.\n   */\n  position(metrics, savedPositions) {\n    if (this.workspace_.RTL) {\n      this.htmlDiv_.style.left = metrics.absoluteMetrics.left + 'px';\n    } else {\n      if (metrics.toolboxMetrics.position === Blockly.TOOLBOX_AT_RIGHT) {\n        this.htmlDiv_.style.right = metrics.toolboxMetrics.width + 'px';\n      } else {\n        this.htmlDiv_.style.right = '0';\n      }\n    }\n    this.htmlDiv_.style.top = metrics.absoluteMetrics.top + 'px';\n  }\n\n  /**\n   * Handles input value change in search bar.\n   * @private\n   */\n  onInput_() {\n    if (this.searchOnInput) {\n      const inputValue = this.inputElement_.value.trim();\n      if (inputValue !== this.searchText_) {\n        this.searchAndHighlight(inputValue, this.preserveSelected);\n      }\n    }\n  }\n\n  /**\n   * Handles a key down for the search bar.\n   * @param {KeyboardEvent} e The key down event.\n   * @private\n   */\n  onKeyDown_(e) {\n    if (e.keyCode === Blockly.utils.KeyCodes.ESC) {\n      this.close();\n    } else if (e.keyCode === Blockly.utils.KeyCodes.ENTER) {\n      if (this.searchOnInput) {\n        this.next();\n      } else {\n        const inputValue = this.inputElement_.value.trim();\n        if (inputValue !== this.searchText_) {\n          this.searchAndHighlight(inputValue, this.preserveSelected);\n        }\n      }\n    }\n  }\n\n  /**\n   * Opens the search bar when Control F or Command F are used on the workspace.\n   * @param {KeyboardEvent} e The key down event.\n   * @private\n   */\n  onWorkspaceKeyDown_(e) {\n    // TODO: Look into handling keyboard shortcuts on workspace in Blockly.\n    if ((e.ctrlKey || e.metaKey) && e.keyCode === Blockly.utils.KeyCodes.F) {\n      this.open();\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  /**\n   * Selects the previous block.\n   */\n  previous() {\n    this.setCurrentBlock_(this.currentBlockIndex_ - 1);\n  }\n\n  /**\n   * Selects the next block.\n   */\n  next() {\n    this.setCurrentBlock_(this.currentBlockIndex_ + 1);\n  }\n\n  /**\n   * Sets the placeholder text for the search bar text input.\n   * @param {string} placeholderText The placeholder text.\n   */\n  setSearchPlaceholder(placeholderText) {\n    this.textInputPlaceholder_ = placeholderText;\n    if (this.inputElement_) {\n      this.inputElement_.setAttribute('placeholder',\n          this.textInputPlaceholder_);\n    }\n  }\n\n  /**\n   * Changes the currently \"selected\" block and adds extra highlight.\n   * @param {number} index Index of block to set as current. Number is wrapped.\n   * @protected\n   */\n  setCurrentBlock_(index) {\n    if (!this.blocks_.length) {\n      return;\n    }\n    let currentBlock = this.blocks_[this.currentBlockIndex_];\n    if (currentBlock) {\n      this.unhighlightCurrentSelection_(currentBlock);\n    }\n    this.currentBlockIndex_ =\n        (index % this.blocks_.length + this.blocks_.length) %\n        this.blocks_.length;\n    currentBlock = this.blocks_[this.currentBlockIndex_];\n\n    this.highlightCurrentSelection_(currentBlock);\n    this.scrollToVisible_(currentBlock);\n  }\n\n  /**\n   * Opens the search bar.\n   */\n  open() {\n    this.setVisible_(true);\n    this.inputElement_.focus();\n    if (this.searchText_) {\n      this.searchAndHighlight(this.searchText_);\n    }\n  }\n\n  /**\n   * Closes the search bar.\n   */\n  close() {\n    this.setVisible_(false);\n    this.workspace_.markFocused();\n    this.clearBlocks();\n  }\n\n  /**\n   * Shows or hides the workspace search bar.\n   * @param {boolean} show Whether to set the search bar as visible.\n   * @private\n   */\n  setVisible_(show) {\n    this.htmlDiv_.style.display = show ? 'flex' : 'none';\n  }\n\n  /**\n   * Searches the workspace for the current search term and highlights matching\n   * blocks.\n   * @param {string} searchText The search text.\n   * @param {boolean=} preserveCurrent Whether to preserve the current block\n   *    if it is included in the new matching blocks.\n   */\n  searchAndHighlight(searchText, preserveCurrent) {\n    const oldCurrentBlock = this.blocks_[this.currentBlockIndex_];\n    this.searchText_ = searchText.trim();\n    this.clearBlocks();\n    this.blocks_ = this.getMatchingBlocks_(\n        this.workspace_, this.searchText_, this.caseSensitive);\n    this.highlightSearchGroup_(this.blocks_);\n    let currentIdx = 0;\n    if (preserveCurrent) {\n      currentIdx = this.blocks_.indexOf(oldCurrentBlock);\n      currentIdx = currentIdx > -1 ? currentIdx : 0;\n    }\n    this.setCurrentBlock_(currentIdx);\n  }\n\n  /**\n   * Returns pool of blocks to search from.\n   * @param {!Blockly.WorkspaceSvg} workspace The workspace to get blocks from.\n   * @return {!Array.<!Blockly.BlockSvg>} The search pool of blocks to use.\n   * @private\n   */\n  getSearchPool_(workspace) {\n    const blocks = (\n      /** @type {!Array.<!Blockly.BlockSvg>} */\n      workspace.getAllBlocks(true));\n    return blocks.filter((block) => {\n      // Filter out blocks contained inside of another collapsed block.\n      const surroundParent = block.getSurroundParent();\n      return !surroundParent || !surroundParent.isCollapsed();\n    });\n  }\n\n  /**\n   * Returns whether the given block matches the search text.\n   * @param {!Blockly.BlockSvg} block The block to check.\n   * @param {string} searchText The search text. Note if the search is case\n   *    insensitive, this will be passed already converted to lowercase letters.\n   * @param {boolean} caseSensitive Whether the search is caseSensitive.\n   * @return {boolean} True if the block is a match, false otherwise.\n   * @protected\n   */\n  isBlockMatch_(block, searchText, caseSensitive) {\n    let blockText = '';\n    if (block.isCollapsed()) {\n      // Search the whole string for collapsed blocks.\n      blockText = block.toString();\n    } else {\n      const topBlockText = [];\n      block.inputList.forEach((input) => {\n        input.fieldRow.forEach((field) => {\n          topBlockText.push(field.getText());\n        });\n      });\n      blockText = topBlockText.join(' ').trim();\n    }\n    if (!caseSensitive) {\n      blockText = blockText.toLowerCase();\n    }\n    return blockText.indexOf(searchText) > -1;\n  }\n\n  /**\n   * Returns blocks that match the given search text.\n   * @param {!Blockly.WorkspaceSvg} workspace The workspace to search.\n   * @param {string} searchText The search text.\n   * @param {boolean} caseSensitive Whether the search should be case sensitive.\n   * @return {!Array.<Blockly.BlockSvg>} The blocks that match the search\n   *    text.\n   * @protected\n   */\n  getMatchingBlocks_(workspace, searchText, caseSensitive) {\n    if (!searchText) {\n      return [];\n    }\n    if (!this.caseSensitive) {\n      searchText = searchText.toLowerCase();\n    }\n    const searchGroup = this.getSearchPool_(workspace);\n    return searchGroup.filter(\n        (block) => this.isBlockMatch_(block, searchText, caseSensitive));\n  }\n\n  /**\n   * Clears the selection group and current block.\n   */\n  clearBlocks() {\n    this.unhighlightSearchGroup_(this.blocks_);\n    const currentBlock = this.blocks_[this.currentBlockIndex_];\n    if (currentBlock) {\n      this.unhighlightCurrentSelection_(currentBlock);\n    }\n    this.currentBlockIndex_ = -1;\n    this.blocks_ = [];\n  }\n\n  /**\n   * Adds \"current selection\" highlight to the provided block.\n   * Highlights the provided block as the \"current selection\".\n   * @param {!Blockly.BlockSvg} currentBlock The block to highlight.\n   * @protected\n   */\n  highlightCurrentSelection_(currentBlock) {\n    const path = currentBlock.pathObject.svgPath;\n    Blockly.utils.dom.addClass(path, 'blockly-ws-search-current');\n  }\n\n  /**\n   * Removes \"current selection\" highlight from provided block.\n   * @param {Blockly.BlockSvg} currentBlock The block to unhighlight.\n   * @protected\n   */\n  unhighlightCurrentSelection_(currentBlock) {\n    const path = currentBlock.pathObject.svgPath;\n    Blockly.utils.dom.removeClass(path, 'blockly-ws-search-current');\n  }\n\n  /**\n   * Adds highlight to the provided blocks.\n   * @param {!Array.<Blockly.BlockSvg>} blocks The blocks to highlight.\n   * @protected\n   */\n  highlightSearchGroup_(blocks) {\n    blocks.forEach((block) => {\n      const blockPath = block.pathObject.svgPath;\n      Blockly.utils.dom.addClass(blockPath, 'blockly-ws-search-highlight');\n    });\n  }\n\n  /**\n   * Removes highlight from the provided blocks.\n   * @param {!Array.<Blockly.BlockSvg>} blocks The blocks to unhighlight.\n   * @protected\n   */\n  unhighlightSearchGroup_(blocks) {\n    blocks.forEach((block) => {\n      const blockPath = block.pathObject.svgPath;\n      Blockly.utils.dom.removeClass(blockPath, 'blockly-ws-search-highlight');\n    });\n  }\n\n  /**\n   * Scrolls workspace to bring given block into view.\n   * @param {!Blockly.BlockSvg} block The block to bring into view.\n   * @protected\n   */\n  scrollToVisible_(block) {\n    if (!this.workspace_.isMovable()) {\n      // Cannot scroll to block in a non-movable workspace.\n      return;\n    }\n    // XY is in workspace coordinates.\n    const xy = block.getRelativeToSurfaceXY();\n    const scale = this.workspace_.scale;\n\n    // Block bounds in pixels relative to the workspace origin (0,0 is centre).\n    const width = block.width * scale;\n    const height = block.height * scale;\n    const top = xy.y * scale;\n    const bottom = (xy.y + block.height) * scale;\n    // In RTL the block's position is the top right of the block, not top left.\n    const left = this.workspace_.RTL ? xy.x * scale - width : xy.x * scale;\n    const right = this.workspace_.RTL ? xy.x * scale : xy.x * scale + width;\n\n    const metrics = this.workspace_.getMetrics();\n\n    let targetLeft = metrics.viewLeft;\n    const overflowLeft = left < metrics.viewLeft;\n    const overflowRight = right > metrics.viewLeft + metrics.viewWidth;\n    const wideBlock = width > metrics.viewWidth;\n\n    if ((!wideBlock && overflowLeft) || (wideBlock && !this.workspace_.RTL)) {\n      // Scroll to show left side of block\n      targetLeft = left;\n    } else if ((!wideBlock && overflowRight) ||\n        (wideBlock && this.workspace_.RTL)) {\n      // Scroll to show right side of block\n      targetLeft = right - metrics.viewWidth;\n    }\n\n    let targetTop = metrics.viewTop;\n    const overflowTop = top < metrics.viewTop;\n    const overflowBottom = bottom > metrics.viewTop + metrics.viewHeight;\n    const tallBlock = height > metrics.viewHeight;\n\n    if (overflowTop || (tallBlock && overflowBottom)) {\n      // Scroll to show top of block\n      targetTop = top;\n    } else if (overflowBottom) {\n      // Scroll to show bottom of block\n      targetTop = bottom - metrics.viewHeight;\n    }\n    if (targetLeft !== metrics.viewLeft || targetTop !== metrics.viewTop) {\n      const activeEl = document.activeElement;\n      this.workspace_.scroll(-targetLeft, -targetTop);\n      if (activeEl) {\n        // Blockly.WidgetDiv.hide called in scroll is taking away focus.\n        // TODO: Review setFocused call in Blockly.WidgetDiv.hide.\n        activeEl.focus();\n      }\n    }\n  }\n}\n"],"sourceRoot":""}
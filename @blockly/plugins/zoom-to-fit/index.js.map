{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@blockly/zoom-to-fit/webpack/universalModuleDefinition","webpack://@blockly/zoom-to-fit/external umd {\"root\":\"Blockly\",\"commonjs\":\"blockly/core\",\"commonjs2\":\"blockly/core\",\"amd\":\"blockly/core\"}","webpack://@blockly/zoom-to-fit/webpack/bootstrap","webpack://@blockly/zoom-to-fit/webpack/runtime/compat get default export","webpack://@blockly/zoom-to-fit/webpack/runtime/define property getters","webpack://@blockly/zoom-to-fit/webpack/runtime/hasOwnProperty shorthand","webpack://@blockly/zoom-to-fit/webpack/runtime/make namespace object","webpack://@blockly/zoom-to-fit/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"blockly/core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"blockly/core\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"blockly/core\")) : factory(root[\"Blockly\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE__573__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__573__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview UI control for zoom-to-fit.\n */\n\nimport Blockly from 'blockly/core';\n\n/**\n * Class for zoom to fit control.\n * @param {!Blockly.WorkspaceSvg} workspace The workspace to sit in.\n * @implements {Blockly.IPositionable}\n * @constructor\n */\nexport class ZoomToFitControl {\n  /**\n   * Constructor for zoom-to-fit control.\n   * @param {!Blockly.WorkspaceSvg} workspace The workspace that the zoom-to-fit\n   *     control will be added to.\n   */\n  constructor(workspace) {\n    /**\n     * The workspace.\n     * @type {!Blockly.WorkspaceSvg}\n     * @protected\n     */\n    this.workspace_ = workspace;\n\n    /**\n     * The unique id for this component.\n     * @type {string}\n     */\n    this.id = 'zoomToFit';\n\n    /**\n     * The SVG group containing the zoom-to-fit control.\n     * @type {SVGElement}\n     * @private\n     */\n    this.svgGroup_ = null;\n\n    /**\n     * Left coordinate of the zoom-to-fit control.\n     * @type {number}\n     * @private\n     */\n    this.left_ = 0;\n\n    /**\n     * Top coordinate of the zoom-to-fit control.\n     * @type {number}\n     * @private\n     */\n    this.top_ = 0;\n\n    /**\n     * Width of the zoom-to-fit control.\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.WIDTH_ = 32;\n\n    /**\n     * Height of the zoom-to-fit control.\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.HEIGHT_ = 32;\n\n    /**\n     * Distance between zoom-to-fit control and bottom or top edge of workspace.\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.MARGIN_VERTICAL_ = 20;\n\n    /**\n     * Distance between zoom-to-fit control and right or left edge of workspace.\n     * @type {number}\n     * @const\n     * @private\n     */\n    this.MARGIN_HORIZONTAL_ = 20;\n\n    /**\n     * Whether this has been initialized.\n     * @type {boolean}\n     * @private\n     */\n    this.initialized_ = false;\n  }\n\n  /**\n   * Initializes the zoom reset control.\n   */\n  init() {\n    this.workspace_.getComponentManager().addComponent({\n      component: this,\n      weight: 2,\n      capabilities: [Blockly.ComponentManager.Capability.POSITIONABLE],\n    });\n    this.createDom_();\n    this.initialized_ = true;\n    this.workspace_.resize();\n  }\n  /**\n   * Disposes of workspace search.\n   * Unlink from all DOM elements and remove all event listeners\n   * to prevent memory leaks.\n   */\n  dispose() {\n    if (this.svgGroup_) {\n      Blockly.utils.dom.removeNode(this.svgGroup_);\n    }\n    if (this.onZoomToFitWrapper_) {\n      Blockly.unbindEvent_(this.onZoomToFitWrapper_);\n    }\n  }\n\n  /**\n   * Creates DOM for ui element.\n   * @private\n   */\n  createDom_() {\n    this.svgGroup_ = Blockly.utils.dom.createSvgElement(\n        Blockly.utils.Svg.IMAGE, {\n          'height': this.HEIGHT_ + 'px',\n          'width': this.WIDTH_ + 'px',\n          'class': 'zoomToFit',\n        });\n    this.svgGroup_.setAttributeNS(Blockly.utils.dom.XLINK_NS, 'xlink:href',\n        ZOOM_TO_FIT_SVG_DATAURI);\n\n    Blockly.utils.dom.insertAfter(\n        this.svgGroup_, this.workspace_.getBubbleCanvas());\n\n    // Attach listener.\n    this.onZoomToFitWrapper_ = Blockly.browserEvents.conditionalBind(\n        this.svgGroup_, 'mousedown', null, this.onClick_.bind(this));\n  }\n\n  /**\n   * Handle click event.\n   * @private\n   */\n  onClick_() {\n    this.workspace_.zoomToFit();\n    const uiEvent = new (Blockly.Events.get(Blockly.Events.CLICK))(\n        null, this.workspace_.id, 'zoom_reset_control');\n    Blockly.Events.fire(uiEvent);\n  }\n\n\n  /**\n   * Returns the bounding rectangle of the UI element in pixel units relative to\n   * the Blockly injection div.\n   * @return {!Blockly.utils.Rect} The componentâ€™s bounding box.\n   */\n  getBoundingRectangle() {\n    return new Blockly.utils.Rect(\n        this.top_, this.top_ + this.HEIGHT_,\n        this.left_, this.left_ + this.WIDTH_);\n  }\n\n  /**\n   * Positions the zoom-to-fit control.\n   * It is positioned in the opposite corner to the corner the\n   * categories/toolbox starts at.\n   * @param {!Blockly.MetricsManager.UiMetrics} metrics The workspace metrics.\n   * @param {!Array<!Blockly.utils.Rect>} savedPositions List of rectangles that\n   *     are already on the workspace.\n   */\n  position(metrics, savedPositions) {\n    if (!this.initialized_) {\n      return;\n    }\n    const hasVerticalScrollbars = this.workspace_.scrollbar &&\n        this.workspace_.scrollbar.canScrollHorizontally();\n    const hasHorizontalScrollbars = this.workspace_.scrollbar &&\n        this.workspace_.scrollbar.canScrollVertically();\n\n    if (metrics.toolboxMetrics.position === Blockly.TOOLBOX_AT_LEFT ||\n        (this.workspace_.horizontalLayout && !this.workspace_.RTL)) {\n      // Right corner placement.\n      this.left_ = metrics.absoluteMetrics.left + metrics.viewMetrics.width -\n          this.WIDTH_ - this.MARGIN_HORIZONTAL_;\n      if (hasVerticalScrollbars && !this.workspace_.RTL) {\n        this.left_ -= Blockly.Scrollbar.scrollbarThickness;\n      }\n    } else {\n      // Left corner placement.\n      this.left_ = this.MARGIN_HORIZONTAL_;\n      if (hasVerticalScrollbars && this.workspace_.RTL) {\n        this.left_ += Blockly.Scrollbar.scrollbarThickness;\n      }\n    }\n\n    const startAtBottom =\n        metrics.toolboxMetrics.position !== Blockly.TOOLBOX_AT_BOTTOM;\n    if (startAtBottom) {\n      // Bottom corner placement\n      this.top_ = metrics.absoluteMetrics.top + metrics.viewMetrics.height -\n          this.HEIGHT_ - this.MARGIN_VERTICAL_;\n      if (hasHorizontalScrollbars) {\n        // The horizontal scrollbars are always positioned on the bottom.\n        this.top_ -= Blockly.Scrollbar.scrollbarThickness;\n      }\n    } else {\n      // Upper corner placement\n      this.top_ = metrics.absoluteMetrics.top + this.MARGIN_VERTICAL_;\n    }\n\n    // Check for collision and bump if needed.\n    let boundingRect = this.getBoundingRectangle();\n    for (let i = 0, otherEl; (otherEl = savedPositions[i]); i++) {\n      if (boundingRect.intersects(otherEl)) {\n        if (startAtBottom) { // Bump up.\n          this.top_ = otherEl.top - this.HEIGHT_ - this.MARGIN_VERTICAL_;\n        } else { // Bump down.\n          this.top_ = otherEl.bottom + this.MARGIN_VERTICAL_;\n        }\n        // Recheck other savedPositions\n        boundingRect = this.getBoundingRectangle();\n        i = -1;\n      }\n    }\n\n    this.svgGroup_.setAttribute('transform',\n        'translate(' + this.left_ + ',' + this.top_ + ')');\n  }\n}\n\n/**\n * Base64 encoded data uri for zoom to fit  icon.\n * @type {string}\n */\nconst ZOOM_TO_FIT_SVG_DATAURI =\n    'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\n    '9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZm' +\n    'lsbD0iIzU0NkU3QSI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PH' +\n    'BhdGggZD0iTTUgNi40Mkw4LjA5IDkuNSA5LjUgOC4wOSA2LjQxIDVIOVYzSDN2Nmgyem0xMC' +\n    '0zLjQxdjJoMi41N0wxNC41IDguMDlsMS40MSAxLjQxTDE5IDYuNDFWOWgyVjMuMDF6bTQgMT' +\n    'QuNTdsLTMuMDktMy4wOC0xLjQxIDEuNDFMMTcuNTkgMTlIMTV2Mmg2di02aC0yek04LjA5ID' +\n    'E0LjVMNSAxNy41OVYxNUgzdjZoNnYtMkg2LjQybDMuMDgtMy4wOXoiLz48L3N2Zz4=';\n\nBlockly.Css.register([\n  `.zoomToFit {\n    opacity: .4;\n  }\n  .zoomToFit:hover {\n    opacity: .6;\n  }\n  .zoomToFit:active {\n    opacity: .8;\n  }`,\n]);\n"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE__573__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","ZoomToFitControl","workspace","workspace_","id","svgGroup_","left_","top_","WIDTH_","HEIGHT_","MARGIN_VERTICAL_","MARGIN_HORIZONTAL_","initialized_","getComponentManager","addComponent","component","weight","capabilities","Blockly","createDom_","resize","onZoomToFitWrapper_","setAttributeNS","ZOOM_TO_FIT_SVG_DATAURI","getBubbleCanvas","onClick_","bind","zoomToFit","uiEvent","metrics","savedPositions","hasVerticalScrollbars","scrollbar","canScrollHorizontally","hasHorizontalScrollbars","canScrollVertically","toolboxMetrics","position","horizontalLayout","RTL","absoluteMetrics","left","viewMetrics","width","startAtBottom","top","height","otherEl","boundingRect","getBoundingRectangle","intersects","bottom","setAttribute"],"sourceRoot":""}